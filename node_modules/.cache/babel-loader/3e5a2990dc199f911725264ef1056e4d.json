{"remainingRequest":"/var/www/provider-stg.hera.health/node_modules/thread-loader/dist/cjs.js!/var/www/provider-stg.hera.health/node_modules/babel-loader/lib/index.js!/var/www/provider-stg.hera.health/node_modules/eslint-loader/index.js??ref--13-0!/var/www/provider-stg.hera.health/src/api/RequestFactory.js","dependencies":[{"path":"/var/www/provider-stg.hera.health/src/api/RequestFactory.js","mtime":1592933452059},{"path":"/var/www/provider-stg.hera.health/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/var/www/provider-stg.hera.health/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/var/www/provider-stg.hera.health/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/var/www/provider-stg.hera.health/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jbGFzc0NhbGxDaGVjayBmcm9tICIvdmFyL3d3dy9wcm92aWRlci1zdGcuaGVyYS5oZWFsdGgvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NsYXNzQ2FsbENoZWNrIjsKaW1wb3J0IF9jcmVhdGVDbGFzcyBmcm9tICIvdmFyL3d3dy9wcm92aWRlci1zdGcuaGVyYS5oZWFsdGgvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZUNsYXNzIjsKaW1wb3J0IFVzZXJSZXF1ZXN0IGZyb20gIi4vcmVxdWVzdC9Vc2VyUmVxdWVzdCI7CmltcG9ydCB1dGlscyBmcm9tICIuLi91dGlscy91dGlscyI7CmltcG9ydCBDb21tb25SZXF1ZXN0IGZyb20gIi4vcmVxdWVzdC9Db21tb25SZXF1ZXN0IjsKaW1wb3J0IEFkbWluUmVxdWVzdCBmcm9tICcuL3JlcXVlc3QvQWRtaW5SZXF1ZXN0JzsKaW1wb3J0IHsgYXBwSGVscGVyIH0gZnJvbSAiLi8uLi91dGlscy9hcHBIZWxwZXIiOwp2YXIgcmVxdWVzdE1hcCA9IHsKICBBZG1pblJlcXVlc3Q6IEFkbWluUmVxdWVzdCwKICBVc2VyUmVxdWVzdDogVXNlclJlcXVlc3QsCiAgQ29tbW9uUmVxdWVzdDogQ29tbW9uUmVxdWVzdAp9Owp2YXIgaW5zdGFuY2VzID0ge307Cgp2YXIgUmVxdWVzdEZhY3RvcnkgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogIGZ1bmN0aW9uIFJlcXVlc3RGYWN0b3J5KCkgewogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFJlcXVlc3RGYWN0b3J5KTsKICB9CgogIF9jcmVhdGVDbGFzcyhSZXF1ZXN0RmFjdG9yeSwgbnVsbCwgW3sKICAgIGtleTogImdldFJlcXVlc3QiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldFJlcXVlc3QoY2xhc3NuYW1lKSB7CiAgICAgIGlmICh1dGlscy5nZXRMb2NhbFVzZXIoKSAmJiBhcHBIZWxwZXIuaXNDbGllbnQoKSkgewogICAgICAgIHdpbmRvdy5heGlvcy5kZWZhdWx0cy5oZWFkZXJzLmNvbW1vblsnQXV0aG9yaXphdGlvbiddID0gdXRpbHMuZ2V0TG9jYWxVc2VyKCkudG9rZW47CiAgICAgIH0KCiAgICAgIGlmICh1dGlscy5nZXRMb2NhbEFkbWluKCkgJiYgYXBwSGVscGVyLmlzQWRtaW4oKSkgewogICAgICAgIHdpbmRvdy5heGlvcy5kZWZhdWx0cy5oZWFkZXJzLmNvbW1vblsnQXV0aG9yaXphdGlvbiddID0gdXRpbHMuZ2V0TG9jYWxBZG1pbigpLnRva2VuOwogICAgICB9CgogICAgICB3aW5kb3cuYXhpb3MuZGVmYXVsdHMuaGVhZGVycy5jb21tb25bJ0NvbnRlbnQtVHlwZSddID0gJ2FwcGxpY2F0aW9uL2pzb24nOwogICAgICB2YXIgUmVxdWVzdENsYXNzID0gcmVxdWVzdE1hcFtjbGFzc25hbWVdOwoKICAgICAgaWYgKCFSZXF1ZXN0Q2xhc3MpIHsKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgcmVxdWVzdCBjbGFzcyBuYW1lOiAnICsgY2xhc3NuYW1lKTsKICAgICAgfQoKICAgICAgdmFyIHJlcXVlc3RJbnN0YW5jZSA9IGluc3RhbmNlc1tjbGFzc25hbWVdOwoKICAgICAgaWYgKCFyZXF1ZXN0SW5zdGFuY2UpIHsKICAgICAgICByZXF1ZXN0SW5zdGFuY2UgPSBuZXcgUmVxdWVzdENsYXNzKCk7CiAgICAgICAgaW5zdGFuY2VzW2NsYXNzbmFtZV0gPSByZXF1ZXN0SW5zdGFuY2U7CiAgICAgIH0KCiAgICAgIHJldHVybiByZXF1ZXN0SW5zdGFuY2U7CiAgICB9CiAgfV0pOwoKICByZXR1cm4gUmVxdWVzdEZhY3Rvcnk7Cn0oKTsKCmV4cG9ydCB7IFJlcXVlc3RGYWN0b3J5IGFzIGRlZmF1bHQgfTs="},{"version":3,"sources":["/var/www/provider-stg.hera.health/src/api/RequestFactory.js"],"names":["UserRequest","utils","CommonRequest","AdminRequest","appHelper","requestMap","instances","RequestFactory","classname","getLocalUser","isClient","window","axios","defaults","headers","common","token","getLocalAdmin","isAdmin","RequestClass","Error","requestInstance"],"mappings":";;AAAA,OAAOA,WAAP,MAAwB,uBAAxB;AACA,OAAOC,KAAP,MAAkB,gBAAlB;AACA,OAAOC,aAAP,MAA0B,yBAA1B;AACA,OAAOC,YAAP,MAAyB,wBAAzB;AACA,SAAQC,SAAR,QAAwB,sBAAxB;AAEA,IAAMC,UAAU,GAAG;AACjBF,EAAAA,YAAY,EAAZA,YADiB;AAEjBH,EAAAA,WAAW,EAAXA,WAFiB;AAGjBE,EAAAA,aAAa,EAAbA;AAHiB,CAAnB;AAKA,IAAMI,SAAS,GAAG,EAAlB;;IAGqBC,c;;;;;;;+BAEDC,S,EAAW;AAC3B,UAAIP,KAAK,CAACQ,YAAN,MAAwBL,SAAS,CAACM,QAAV,EAA5B,EAAkD;AAChDC,QAAAA,MAAM,CAACC,KAAP,CAAaC,QAAb,CAAsBC,OAAtB,CAA8BC,MAA9B,CAAqC,eAArC,IAAwDd,KAAK,CAACQ,YAAN,GAAqBO,KAA7E;AACD;;AACD,UAAIf,KAAK,CAACgB,aAAN,MAAyBb,SAAS,CAACc,OAAV,EAA7B,EAAkD;AAChDP,QAAAA,MAAM,CAACC,KAAP,CAAaC,QAAb,CAAsBC,OAAtB,CAA8BC,MAA9B,CAAqC,eAArC,IAAwDd,KAAK,CAACgB,aAAN,GAAsBD,KAA9E;AACD;;AAEDL,MAAAA,MAAM,CAACC,KAAP,CAAaC,QAAb,CAAsBC,OAAtB,CAA8BC,MAA9B,CAAqC,cAArC,IAAuD,kBAAvD;AACA,UAAII,YAAY,GAAGd,UAAU,CAACG,SAAD,CAA7B;;AACA,UAAI,CAACW,YAAL,EAAmB;AACjB,cAAM,IAAIC,KAAJ,CAAU,iCAAiCZ,SAA3C,CAAN;AACD;;AAED,UAAIa,eAAe,GAAGf,SAAS,CAACE,SAAD,CAA/B;;AACA,UAAI,CAACa,eAAL,EAAsB;AACpBA,QAAAA,eAAe,GAAG,IAAIF,YAAJ,EAAlB;AACAb,QAAAA,SAAS,CAACE,SAAD,CAAT,GAAuBa,eAAvB;AACD;;AACD,aAAOA,eAAP;AACD;;;;;;SAtBkBd,c","sourcesContent":["import UserRequest from \"./request/UserRequest\";\nimport utils from \"../utils/utils\";\nimport CommonRequest from \"./request/CommonRequest\";\nimport AdminRequest from './request/AdminRequest'\nimport {appHelper} from \"./../utils/appHelper\";\n\nconst requestMap = {\n  AdminRequest,\n  UserRequest,\n  CommonRequest\n}\nconst instances = {};\n\n\nexport default class RequestFactory {\n\n  static getRequest(classname) {\n    if (utils.getLocalUser() && appHelper.isClient()) {\n      window.axios.defaults.headers.common['Authorization'] = utils.getLocalUser().token;\n    }\n    if (utils.getLocalAdmin() && appHelper.isAdmin()) {\n      window.axios.defaults.headers.common['Authorization'] = utils.getLocalAdmin().token;\n    }\n\n    window.axios.defaults.headers.common['Content-Type'] = 'application/json';\n    let RequestClass = requestMap[classname];\n    if (!RequestClass) {\n      throw new Error('Invalid request class name: ' + classname);\n    }\n\n    let requestInstance = instances[classname];\n    if (!requestInstance) {\n      requestInstance = new RequestClass();\n      instances[classname] = requestInstance;\n    }\n    return requestInstance;\n  }\n\n}"]}]}