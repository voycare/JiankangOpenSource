{"remainingRequest":"/var/www/provider.voycare.com/node_modules/thread-loader/dist/cjs.js!/var/www/provider.voycare.com/node_modules/babel-loader/lib/index.js!/var/www/provider.voycare.com/node_modules/eslint-loader/index.js??ref--13-0!/var/www/provider.voycare.com/src/api/BaseRequest.js","dependencies":[{"path":"/var/www/provider.voycare.com/src/api/BaseRequest.js","mtime":1597939243733},{"path":"/var/www/provider.voycare.com/node_modules/cache-loader/dist/cjs.js","mtime":1596630677130},{"path":"/var/www/provider.voycare.com/node_modules/thread-loader/dist/cjs.js","mtime":1596630678838},{"path":"/var/www/provider.voycare.com/node_modules/babel-loader/lib/index.js","mtime":1596630688999},{"path":"/var/www/provider.voycare.com/node_modules/eslint-loader/index.js","mtime":1596630671553}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmtleXMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nIjsKaW1wb3J0IF9jbGFzc0NhbGxDaGVjayBmcm9tICIvdmFyL3d3dy9wcm92aWRlci52b3ljYXJlLmNvbS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY2xhc3NDYWxsQ2hlY2siOwppbXBvcnQgX2NyZWF0ZUNsYXNzIGZyb20gIi92YXIvd3d3L3Byb3ZpZGVyLnZveWNhcmUuY29tL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVDbGFzcyI7CmltcG9ydCBVdGlscyBmcm9tICIuLi91dGlscy91dGlscyI7CmltcG9ydCB7IGFwcEhlbHBlciB9IGZyb20gIi4uL3V0aWxzL2FwcEhlbHBlciI7Cgp2YXIgQmFzZVJlcXVlc3QgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogIGZ1bmN0aW9uIEJhc2VSZXF1ZXN0KCkgewogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEJhc2VSZXF1ZXN0KTsKICB9CgogIF9jcmVhdGVDbGFzcyhCYXNlUmVxdWVzdCwgW3sKICAgIGtleTogImdldFVybFByZWZpeCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0VXJsUHJlZml4KCkgewogICAgICByZXR1cm4gcHJvY2Vzcy5lbnYuVlVFX0FQUF9CQVNFX1VSTCArICdhcGkvJzsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJwb3N0IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBwb3N0KHVybCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdmFyIGRhdGEgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IHt9OwogICAgICB2YXIgaGVhZGVycyA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzJdIDogbnVsbDsKICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgICB2YXIgb3B0aW9ucyA9IHt9OwoKICAgICAgICBpZiAoaGVhZGVycykgewogICAgICAgICAgb3B0aW9ucy5oZWFkZXJzID0gaGVhZGVyczsKICAgICAgICB9CgogICAgICAgIHdpbmRvdy5heGlvcy5wb3N0KF90aGlzLmdldFVybFByZWZpeCgpICsgdXJsLCBkYXRhLCBvcHRpb25zKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEubWVzc2FnZSkgewogICAgICAgICAgICB3aW5kb3cuJHN0b3JlLmRpc3BhdGNoKCdhcHAvc2hvd01vZGFsJywgewogICAgICAgICAgICAgIG1lc3NhZ2U6IHJlc3BvbnNlLmRhdGEubWVzc2FnZQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5zdGF0dXMgPT09IDIwMCkgewogICAgICAgICAgICByZXNvbHZlKHJlc3BvbnNlLmRhdGEpOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gMjAwKSB7CiAgICAgICAgICAgIHJlc29sdmUocmVzcG9uc2UpOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEuc3RhdHVzID09PSA0MDYpIHsKICAgICAgICAgICAgLy8gd2luZG93LmxvY2F0aW9uLmhyZWYgPSAiL2xvZ2luIjsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgfQogICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgICAgX3RoaXMuX2Vycm9ySGFuZGxlcihyZWplY3QsIGVycm9yKTsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAiZ2V0IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXQodXJsLCBwYXJhbXMpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICAgIHdpbmRvdy5heGlvcy5nZXQoX3RoaXMyLmdldFVybFByZWZpeCgpICsgdXJsLCB7CiAgICAgICAgICBwYXJhbXM6IHBhcmFtcwogICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5zdGF0dXMgPT09IDIwMCkgewogICAgICAgICAgICByZXNvbHZlKHJlc3BvbnNlLmRhdGEpOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gMjAwKSB7CiAgICAgICAgICAgIHJlc29sdmUocmVzcG9uc2UpOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9IC8vIGlmKHJlc3BvbnNlLmRhdGEuc3RhdHVzID09PSA0MDYpewogICAgICAgICAgLy8gICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gIi9sb2dpbiI7CiAgICAgICAgICAvLyAgICAgcmV0dXJuOwogICAgICAgICAgLy8gfQoKICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgIF90aGlzMi5fZXJyb3JIYW5kbGVyKHJlamVjdCwgZXJyb3IpOwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJfZXJyb3JIYW5kbGVyIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBfZXJyb3JIYW5kbGVyKHJlamVjdCwgZXJyKSB7CiAgICAgIGlmIChlcnIucmVzcG9uc2UpIHsKICAgICAgICBpZiAoZXJyLnJlc3BvbnNlLmRhdGEuc3RhdHVzID09PSA0MTQpIHsKICAgICAgICAgIHZhciBmaXJzdF9rZXkgPSBPYmplY3Qua2V5cyhlcnIucmVzcG9uc2UuZGF0YS5tZXNzYWdlKVswXTsKCiAgICAgICAgICBpZiAoZmlyc3Rfa2V5KSB7CiAgICAgICAgICAgIGFsZXJ0KGVyci5yZXNwb25zZS5kYXRhLm1lc3NhZ2VbZmlyc3Rfa2V5XVswXSk7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBpZiAoZXJyLnJlc3BvbnNlLmRhdGEuc3RhdHVzID09PSA0MDQpIHsKICAgICAgICAgIGFsZXJ0KGVyci5yZXNwb25zZS5kYXRhLm1lc3NhZ2UpOwogICAgICAgIH0KCiAgICAgICAgaWYgKGVyci5yZXNwb25zZS5zdGF0dXMgPT09IDQwMSkgewogICAgICAgICAgaWYgKGFwcEhlbHBlci5pc0NsaW5pYygpKSB7CiAgICAgICAgICAgIFV0aWxzLnJlbW92ZUxvY2FsQ2xpbmljKCk7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKGFwcEhlbHBlci5pc0FkbWluKCkpIHsKICAgICAgICAgICAgVXRpbHMucmVtb3ZlTG9jYWxBZG1pbigpOwogICAgICAgICAgfQoKICAgICAgICAgIGlmIChhcHBIZWxwZXIuaXNDbGllbnQoKSkgewogICAgICAgICAgICBVdGlscy5yZW1vdmVMb2NhbFVzZXIoKTsKICAgICAgICAgIH0KCiAgICAgICAgICByZXR1cm4gd2luZG93LmxvY2F0aW9uLmhyZWYgPSAnLyc7CiAgICAgICAgfQogICAgICB9CgogICAgICByZXR1cm4gcmVqZWN0KGVycik7CiAgICB9CiAgfV0pOwoKICByZXR1cm4gQmFzZVJlcXVlc3Q7Cn0oKTsKCmV4cG9ydCB7IEJhc2VSZXF1ZXN0IGFzIGRlZmF1bHQgfTs="},{"version":3,"sources":["/var/www/provider.voycare.com/src/api/BaseRequest.js"],"names":["Utils","appHelper","BaseRequest","process","env","VUE_APP_BASE_URL","url","data","headers","Promise","resolve","reject","options","window","axios","post","getUrlPrefix","then","response","message","$store","dispatch","status","catch","error","_errorHandler","params","get","err","first_key","Object","keys","alert","isClinic","removeLocalClinic","isAdmin","removeLocalAdmin","isClient","removeLocalUser","location","href"],"mappings":"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","sourcesContent":["import Utils from \"../utils/utils\";\nimport {appHelper} from \"../utils/appHelper\"\n\nexport default class BaseRequest {\n  getUrlPrefix() {\n    return process.env.VUE_APP_BASE_URL + 'api/';\n  }\n\n  post(url, data = {}, headers = null) {\n    return new Promise((resolve, reject) => {\n      let options = {}\n      if (headers) {\n        options.headers = headers\n      }\n\n      window.axios\n        .post(this.getUrlPrefix() + url, data, options)\n        .then((response) => {\n          if (response.data.message) {\n            window.$store.dispatch('app/showModal', {message: response.data.message})\n          }\n          if (response.data.status === 200) {\n            resolve(response.data);\n            return;\n          }\n          if (response.status === 200) {\n            resolve(response)\n            return\n          }\n          if (response.data.status === 406) {\n            // window.location.href = \"/login\";\n            return;\n          }\n        })\n        .catch((error) => {\n          this._errorHandler(reject, error);\n        });\n    });\n  }\n\n  get(url, params) {\n    return new Promise((resolve, reject) => {\n      window.axios\n        .get(this.getUrlPrefix() + url, {params})\n        .then((response) => {\n          if (response.data.status === 200) {\n            resolve(response.data);\n            return;\n          }\n          if (response.status === 200) {\n            resolve(response)\n            return\n          }\n\n          // if(response.data.status === 406){\n          //     window.location.href = \"/login\";\n          //     return;\n          // }\n        })\n        .catch((error) => {\n          this._errorHandler(reject, error);\n        });\n    })\n  }\n\n  _errorHandler(reject, err) {\n    if (err.response) {\n      if (err.response.data.status === 414) {\n        let first_key = Object.keys(err.response.data.message)[0]\n        if (first_key) {\n          alert(err.response.data.message[first_key][0])\n        }\n      }\n      if (err.response.data.status === 404) {\n        alert(err.response.data.message)\n      }\n      if (err.response.status === 401) {\n        if (appHelper.isClinic()) {\n          Utils.removeLocalClinic()\n        }\n        if (appHelper.isAdmin()) {\n          Utils.removeLocalAdmin()\n        }\n        if (appHelper.isClient()) {\n          Utils.removeLocalUser()\n        }\n\n        return window.location.href = '/'\n      }\n    }\n    return reject(err);\n  }\n\n}\n"]}]}