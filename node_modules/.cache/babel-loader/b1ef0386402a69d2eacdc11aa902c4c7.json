{"remainingRequest":"/var/www/provider-stg.hera.health/node_modules/thread-loader/dist/cjs.js!/var/www/provider-stg.hera.health/node_modules/babel-loader/lib/index.js!/var/www/provider-stg.hera.health/node_modules/cache-loader/dist/cjs.js??ref--0-0!/var/www/provider-stg.hera.health/node_modules/vue-loader/lib/index.js??vue-loader-options!/var/www/provider-stg.hera.health/src/views/admin/ClinicGallery.vue?vue&type=script&lang=js&","dependencies":[{"path":"/var/www/provider-stg.hera.health/src/views/admin/ClinicGallery.vue","mtime":1596450464074},{"path":"/var/www/provider-stg.hera.health/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/var/www/provider-stg.hera.health/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/var/www/provider-stg.hera.health/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/var/www/provider-stg.hera.health/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/var/www/provider-stg.hera.health/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5zdGFydHMtd2l0aCI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lIjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi92YXIvd3d3L3Byb3ZpZGVyLXN0Zy5oZXJhLmhlYWx0aC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCByZiBmcm9tICIuLi8uLi9hcGkvUmVxdWVzdEZhY3RvcnkiOwpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGlkOiBudWxsLAogICAgICBwaG90b3M6IFtdLAogICAgICBob3ZlcmVkSW1hZ2U6IG51bGwKICAgIH07CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgdmFyIHNlbGYgPSB0aGlzOwogICAgc2VsZi5pZCA9IHNlbGYuJHJvdXRlLnBhcmFtcy5pZDsKICAgIHNlbGYuZ2V0RGV0YWlsKCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBnZXRTcmM6IGZ1bmN0aW9uIGdldFNyYyhzcmMpIHsKICAgICAgaWYgKCFzcmMpIHsKICAgICAgICByZXR1cm4gJ2RhdGE6aW1hZ2UvZ2lmO2Jhc2U2NCxSMGxHT0RsaEFRQUJBSUFBQU1MQ3dnQUFBQ0g1QkFBQUFBQUFMQUFBQUFBQkFBRUFBQUlDUkFFQU93PT0nOwogICAgICB9CgogICAgICByZXR1cm4gc3JjLnN0YXJ0c1dpdGgoJ2RhdGE6aW1hZ2UnKSA/IHNyYyA6IHByb2Nlc3MuZW52LlZVRV9BUFBfQkFTRV9VUkwgKyBzcmM7CiAgICB9LAogICAgZ2V0RGV0YWlsOiBmdW5jdGlvbiBnZXREZXRhaWwoKSB7CiAgICAgIHZhciBzZWxmID0gdGhpczsKICAgICAgcmYuZ2V0UmVxdWVzdCgnQWRtaW5SZXF1ZXN0JykuZ2V0Q2xpbmljUGhvdG9zKHNlbGYuaWQpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIHNlbGYucGhvdG9zID0gcmVzLmRhdGE7CiAgICAgIH0pOwogICAgfSwKICAgIG9uUmVtb3ZlUGhvdG86IGZ1bmN0aW9uIG9uUmVtb3ZlUGhvdG8ocGhvdG8pIHsKICAgICAgdmFyIHNlbGYgPSB0aGlzOwogICAgICB2YXIgciA9IGNvbmZpcm0oIkFyZSB5b3Ugd2FudCB0byByZW1vdmUgdGhpcyBjbGluaWM/Iik7CiAgICAgIGlmICghcikgcmV0dXJuOwogICAgICByZi5nZXRSZXF1ZXN0KCdBZG1pblJlcXVlc3QnKS5wb3N0Q2xpbmljUGhvdG9SZW1vdmUoc2VsZi5pZCwgewogICAgICAgIHBob3RvX2lkOiBwaG90by5pZAogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICB3aW5kb3cuJHN0b3JlLmRpc3BhdGNoKCdhcHAvc2hvd01vZGFsJywgewogICAgICAgICAgbWVzc2FnZTogcmVzLm1lc3NhZ2UKICAgICAgICB9KTsKICAgICAgICBzZWxmLmdldERldGFpbCgpOwogICAgICB9KTsKICAgIH0sCiAgICBvbkFmdGVyUGlja1Bob3RvOiBmdW5jdGlvbiBvbkFmdGVyUGlja1Bob3RvKGUpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgdmFyIHNlbGYsIGZpbGUsIGZvcm1fZGF0YTsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBzZWxmID0gX3RoaXM7CiAgICAgICAgICAgICAgICBmaWxlID0gZS50YXJnZXQuZmlsZXNbMF07CiAgICAgICAgICAgICAgICBmb3JtX2RhdGEgPSBuZXcgRm9ybURhdGEoKTsKICAgICAgICAgICAgICAgIGZvcm1fZGF0YS5hcHBlbmQoJ2ltYWdlJywgZmlsZSk7CiAgICAgICAgICAgICAgICByZi5nZXRSZXF1ZXN0KCdBZG1pblJlcXVlc3QnKS5wb3N0Q2xpbmljUGhvdG9zVXBsb2FkKHNlbGYuaWQsIGZvcm1fZGF0YSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgICAgICAgIHdpbmRvdy4kc3RvcmUuZGlzcGF0Y2goJ2FwcC9zaG93TW9kYWwnLCB7CiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogcmVzLm1lc3NhZ2UKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgIHNlbGYuZ2V0RGV0YWlsKCk7CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIG9uQWRkUGhvdG86IGZ1bmN0aW9uIG9uQWRkUGhvdG8oKSB7CiAgICAgIHZhciBzZWxmID0gdGhpczsKICAgICAgc2VsZi4kcmVmcy5maWxlLmNsaWNrKCk7CiAgICB9LAogICAgdG9CYXNlNjQ6IGZ1bmN0aW9uIHRvQmFzZTY0KGZpbGUpIHsKICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgICB2YXIgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTsKICAgICAgICByZWFkZXIucmVhZEFzRGF0YVVSTChmaWxlKTsKCiAgICAgICAgcmVhZGVyLm9ubG9hZCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHJldHVybiByZXNvbHZlKHJlYWRlci5yZXN1bHQpOwogICAgICAgIH07CgogICAgICAgIHJlYWRlci5vbmVycm9yID0gZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgICByZXR1cm4gcmVqZWN0KGVycm9yKTsKICAgICAgICB9OwogICAgICB9KTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["ClinicGallery.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"content\">\n    <p class=\"title title-22 pb-5\">Gallery</p>\n\n    <p>Please upload photos no more than 2MB each, JPG format only.</p>\n\n    <div class=\"clinic--gallery\">\n      <div class=\"gallery--item\" v-for=\"photo in photos\" :key=\"photo.id\" \n        @mouseenter=\"hoveredImage = photo\" @mouseleave=\"hoveredImage = null\">\n        <img width=\"180\"  height=\"110\" :src=\"getSrc(photo.path)\" \n          :class=\"{ 'blur': hoveredImage && hoveredImage.id === photo.id }\">\n          <i class=\"fa fa-trash-o pointer hide-icon\" id=\"deleteIcon\" aria-hidden=\"true\" \n            @click=\"onRemovePhoto(photo)\" \n            :class=\"{ 'show-icon': hoveredImage && hoveredImage.id === photo.id }\"></i>\n      </div>\n      <a href=\"javascript:void(0)\" @click=\"onAddPhoto\" class=\"gallery--item\">\n        <i class=\"fa fa-plus mr-2\" ></i>\n        <input @change=\"onAfterPickPhoto\" accept=\"image/*\" capture=\"environment\" ref=\"file\" \n          style=\"display: none\" type=\"file\">\n      </a>\n    </div>\n  </div>\n</template>\n<script>\n  import rf from \"../../api/RequestFactory\"\n\n  export default {\n    data() {\n      return {\n        id: null,\n        photos: [],\n        hoveredImage: null\n      }\n    },\n    mounted() {\n      let self = this\n\n      self.id = self.$route.params.id\n      self.getDetail()\n    },\n    methods: {\n      getSrc(src) {\n        if(! src) {\n          return 'data:image/gif;base64,R0lGODlhAQABAIAAAMLCwgAAACH5BAAAAAAALAAAAAABAAEAAAICRAEAOw=='\n        }\n\n        return src.startsWith('data:image') ? src : (process.env.VUE_APP_BASE_URL + src)\n      },\n      getDetail() {\n        let self = this\n\n        rf.getRequest('AdminRequest').getClinicPhotos(self.id).then(res => {\n          self.photos = res.data\n        })\n      },\n      onRemovePhoto(photo) {\n        let self = this\n        var r = confirm(\"Are you want to remove this clinic?\");\n        if (!r)\n          return\n\n        rf.getRequest('AdminRequest').postClinicPhotoRemove(self.id, {photo_id: photo.id}).then(res => {\n          window.$store.dispatch('app/showModal', {message: res.message})\n          self.getDetail()\n        })\n      },\n      async onAfterPickPhoto(e) {\n        let self = this\n        const file = e.target.files[0]\n        const form_data = new FormData()\n        form_data.append('image', file)\n        rf.getRequest('AdminRequest').postClinicPhotosUpload(self.id, form_data)\n        .then(res => {\n          window.$store.dispatch('app/showModal', {message: res.message})\n          self.getDetail()\n        })\n      },\n      onAddPhoto() {\n        let self = this\n\n        self.$refs.file.click()\n      },\n      toBase64(file){\n        return new Promise((resolve, reject) => {\n          const reader = new FileReader();\n          reader.readAsDataURL(file);\n          reader.onload = () => resolve(reader.result);\n          reader.onerror = error => reject(error);\n        })\n      }\n    }\n  }\n</script>\n<style>\n  .gallery--item {\n    background-color: #fff;\n    height: 110px;\n    width: 180px;\n    display: inline-block;\n    text-align: center;\n    line-height: 110px;\n    margin: 2rem 1rem;\n    position: relative;\n  }\n  .gallery--item:hover{\n    background: #434343;\n  }\n  .blur{\n    opacity: 0.2;\n  }\n  .clinic--gallery{\n    display: flex;\n    flex-flow: wrap;\n  }\n  .show-icon{\n    visibility: visible !important;\n  }\n  .hide-icon{\n    visibility: hidden; \n  }\n  #deleteIcon{\n    font-size: 20px;\n    color: #EB6271;\n    position: absolute;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    left: 0;\n    margin: auto;\n    width: 20px;\n    height: 20px;\n  }\n\n</style>\n"],"sourceRoot":"src/views/admin"}]}