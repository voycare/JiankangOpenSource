{"remainingRequest":"/var/www/provider-stg.hera.health/node_modules/thread-loader/dist/cjs.js!/var/www/provider-stg.hera.health/node_modules/babel-loader/lib/index.js!/var/www/provider-stg.hera.health/node_modules/cache-loader/dist/cjs.js??ref--0-0!/var/www/provider-stg.hera.health/node_modules/vue-loader/lib/index.js??vue-loader-options!/var/www/provider-stg.hera.health/src/views/admin/AdminStatementEdit.vue?vue&type=script&lang=js&","dependencies":[{"path":"/var/www/provider-stg.hera.health/src/views/admin/AdminStatementEdit.vue","mtime":1595242105251},{"path":"/var/www/provider-stg.hera.health/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/var/www/provider-stg.hera.health/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/var/www/provider-stg.hera.health/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/var/www/provider-stg.hera.health/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/var/www/provider-stg.hera.health/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHJmIGZyb20gIi4uLy4uL2FwaS9SZXF1ZXN0RmFjdG9yeSI7CmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgaWQ6IG51bGwsCiAgICAgIHN0YXRlbWVudDogewogICAgICAgIGlkOiBudWxsLAogICAgICAgIHN0YXRlbWVudF9ubzogJycsCiAgICAgICAgc2FsZV9wZXJpb2Q6ICcnLAogICAgICAgIHBheW1lbnRfZGF0ZTogJycsCiAgICAgICAgc3RhdHVzOiAnJywKICAgICAgICBncm9zczogJycsCiAgICAgICAgcmVmdW5kOiAnJywKICAgICAgICBmZWU6ICcnLAogICAgICAgIG5ldDogJycsCiAgICAgICAgaXRlbXM6IFtdCiAgICAgIH0KICAgIH07CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgdmFyIHNlbGYgPSB0aGlzOwogICAgc2VsZi5pZCA9IHNlbGYuJHJvdXRlLnBhcmFtcy5pZDsKCiAgICBpZiAoc2VsZi5pZCkgewogICAgICBzZWxmLmdldERldGFpbCgpOwogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgZ2V0VG90YWw6IGZ1bmN0aW9uIGdldFRvdGFsKCkgewogICAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICAgIHZhciB0b3RhbCA9IDA7CiAgICAgIHNlbGYuc3RhdGVtZW50Lml0ZW1zLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICB0b3RhbCArPSBpdGVtLnRvdGFsOwogICAgICB9KTsKICAgICAgcmV0dXJuIHRvdGFsOwogICAgfSwKICAgIGdldERldGFpbDogZnVuY3Rpb24gZ2V0RGV0YWlsKCkgewogICAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICAgIHJmLmdldFJlcXVlc3QoJ0FkbWluUmVxdWVzdCcpLmdldFN0YXRlbWVudERldGFpbChzZWxmLmlkKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBzZWxmLnN0YXRlbWVudCA9IHJlcy5kYXRhOwogICAgICB9KTsKICAgIH0sCiAgICBvbkFkZEl0ZW06IGZ1bmN0aW9uIG9uQWRkSXRlbSgpIHsKICAgICAgdmFyIHNlbGYgPSB0aGlzOwogICAgICBzZWxmLnN0YXRlbWVudC5pdGVtcy5wdXNoKHsKICAgICAgICBpZDogbnVsbCwKICAgICAgICBuYW1lOiAnJywKICAgICAgICBwcmljZTogJycsCiAgICAgICAgcXVhbnRpdHk6ICcnLAogICAgICAgIHRvdGFsOiAnJwogICAgICB9KTsKICAgIH0sCiAgICBvblJlbW92ZUl0ZW06IGZ1bmN0aW9uIG9uUmVtb3ZlSXRlbShpdGVtX2lkLCBpbmRleCkgewogICAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICAgIHZhciByID0gY29uZmlybSgiQXJlIHlvdSB3YW50IHRvIHJlbW92ZSB0aGlzIGNsaW5pYz8iKTsKCiAgICAgIGlmIChyID09IHRydWUpIHsKICAgICAgICBpZiAoc2VsZi5pZCkgewogICAgICAgICAgcmYuZ2V0UmVxdWVzdCgnQWRtaW5SZXF1ZXN0JykucG9zdFJlbW92ZVBheW1lbnRJdGVtKHNlbGYuaWQsIHsKICAgICAgICAgICAgaXRlbV9pZDogaXRlbV9pZAogICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgIHNlbGYuc3RhdGVtZW50ID0gcmVzLmRhdGE7CiAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzZWxmLnN0YXRlbWVudC5pdGVtcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICBpZiAoaSA9PSBpbmRleCkgewogICAgICAgICAgICAgIGRlbGV0ZSBzZWxmLnN0YXRlbWVudC5pdGVtc1tpXTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIG9uU2F2ZURyYWZ0OiBmdW5jdGlvbiBvblNhdmVEcmFmdCgpIHsKICAgICAgdmFyIHNlbGYgPSB0aGlzOwogICAgICB2YXIgcGFyYW1zID0gc2VsZi5wYXltZW50OwogICAgICBwYXJhbXMuaWQgPSBzZWxmLmlkOwogICAgICBwYXJhbXMuc3RhdHVzID0gMTsgLy8gRHJhZnQuCgogICAgICByZi5nZXRSZXF1ZXN0KCdBZG1pblJlcXVlc3QnKS5wb3N0UGF5bWVudHMocGFyYW1zKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBzZWxmLnBheW1lbnQgPSByZXMuZGF0YTsKICAgICAgfSk7CiAgICB9LAogICAgb25TZW5kOiBmdW5jdGlvbiBvblNlbmQoKSB7CiAgICAgIHZhciBzZWxmID0gdGhpczsKICAgICAgdmFyIHBhcmFtcyA9IHNlbGYucGF5bWVudDsKICAgICAgcGFyYW1zLmlkID0gc2VsZi5pZDsKICAgICAgcGFyYW1zLnN0YXR1cyA9IDI7IC8vIFB1Ymxpc2guCgogICAgICByZi5nZXRSZXF1ZXN0KCdBZG1pblJlcXVlc3QnKS5wb3N0UGF5bWVudHMocGFyYW1zKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBzZWxmLnBheW1lbnQgPSByZXMuZGF0YTsKICAgICAgfSk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["AdminStatementEdit.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0GA,OAAA,EAAA,MAAA,0BAAA;AAEA,eAAA;AACA,EAAA,IADA,kBACA;AACA,WAAA;AACA,MAAA,EAAA,EAAA,IADA;AAEA,MAAA,SAAA,EAAA;AACA,QAAA,EAAA,EAAA,IADA;AAEA,QAAA,YAAA,EAAA,EAFA;AAGA,QAAA,WAAA,EAAA,EAHA;AAIA,QAAA,YAAA,EAAA,EAJA;AAKA,QAAA,MAAA,EAAA,EALA;AAMA,QAAA,KAAA,EAAA,EANA;AAOA,QAAA,MAAA,EAAA,EAPA;AAQA,QAAA,GAAA,EAAA,EARA;AASA,QAAA,GAAA,EAAA,EATA;AAUA,QAAA,KAAA,EAAA;AAVA;AAFA,KAAA;AAeA,GAjBA;AAkBA,EAAA,OAlBA,qBAkBA;AACA,QAAA,IAAA,GAAA,IAAA;AAEA,IAAA,IAAA,CAAA,EAAA,GAAA,IAAA,CAAA,MAAA,CAAA,MAAA,CAAA,EAAA;;AACA,QAAA,IAAA,CAAA,EAAA,EAAA;AACA,MAAA,IAAA,CAAA,SAAA;AACA;AACA,GAzBA;AA0BA,EAAA,OAAA,EAAA;AACA,IAAA,QADA,sBACA;AACA,UAAA,IAAA,GAAA,IAAA;AAEA,UAAA,KAAA,GAAA,CAAA;AACA,MAAA,IAAA,CAAA,SAAA,CAAA,KAAA,CAAA,OAAA,CAAA,UAAA,IAAA,EAAA;AACA,QAAA,KAAA,IAAA,IAAA,CAAA,KAAA;AACA,OAFA;AAIA,aAAA,KAAA;AACA,KAVA;AAWA,IAAA,SAXA,uBAWA;AACA,UAAA,IAAA,GAAA,IAAA;AAEA,MAAA,EAAA,CAAA,UAAA,CAAA,cAAA,EAAA,kBAAA,CAAA,IAAA,CAAA,EAAA,EAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,QAAA,IAAA,CAAA,SAAA,GAAA,GAAA,CAAA,IAAA;AACA,OAFA;AAGA,KAjBA;AAkBA,IAAA,SAlBA,uBAkBA;AACA,UAAA,IAAA,GAAA,IAAA;AAEA,MAAA,IAAA,CAAA,SAAA,CAAA,KAAA,CAAA,IAAA,CAAA;AACA,QAAA,EAAA,EAAA,IADA;AAEA,QAAA,IAAA,EAAA,EAFA;AAGA,QAAA,KAAA,EAAA,EAHA;AAIA,QAAA,QAAA,EAAA,EAJA;AAKA,QAAA,KAAA,EAAA;AALA,OAAA;AAOA,KA5BA;AA6BA,IAAA,YA7BA,wBA6BA,OA7BA,EA6BA,KA7BA,EA6BA;AACA,UAAA,IAAA,GAAA,IAAA;AAEA,UAAA,CAAA,GAAA,OAAA,CAAA,qCAAA,CAAA;;AACA,UAAA,CAAA,IAAA,IAAA,EAAA;AACA,YAAA,IAAA,CAAA,EAAA,EAAA;AACA,UAAA,EAAA,CAAA,UAAA,CAAA,cAAA,EAAA,qBAAA,CAAA,IAAA,CAAA,EAAA,EAAA;AAAA,YAAA,OAAA,EAAA;AAAA,WAAA,EAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,YAAA,IAAA,CAAA,SAAA,GAAA,GAAA,CAAA,IAAA;AACA,WAFA;AAGA,SAJA,MAIA;AACA,eAAA,IAAA,CAAA,GAAA,CAAA,EAAA,CAAA,GAAA,IAAA,CAAA,SAAA,CAAA,KAAA,CAAA,MAAA,EAAA,CAAA,EAAA,EAAA;AACA,gBAAA,CAAA,IAAA,KAAA,EAAA;AACA,qBAAA,IAAA,CAAA,SAAA,CAAA,KAAA,CAAA,CAAA,CAAA;AACA;AACA;AACA;AACA;AACA,KA9CA;AA+CA,IAAA,WA/CA,yBA+CA;AACA,UAAA,IAAA,GAAA,IAAA;AAEA,UAAA,MAAA,GAAA,IAAA,CAAA,OAAA;AACA,MAAA,MAAA,CAAA,EAAA,GAAA,IAAA,CAAA,EAAA;AACA,MAAA,MAAA,CAAA,MAAA,GAAA,CAAA,CALA,CAKA;;AAEA,MAAA,EAAA,CAAA,UAAA,CAAA,cAAA,EAAA,YAAA,CAAA,MAAA,EAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,QAAA,IAAA,CAAA,OAAA,GAAA,GAAA,CAAA,IAAA;AACA,OAFA;AAGA,KAzDA;AA0DA,IAAA,MA1DA,oBA0DA;AACA,UAAA,IAAA,GAAA,IAAA;AACA,UAAA,MAAA,GAAA,IAAA,CAAA,OAAA;AACA,MAAA,MAAA,CAAA,EAAA,GAAA,IAAA,CAAA,EAAA;AACA,MAAA,MAAA,CAAA,MAAA,GAAA,CAAA,CAJA,CAIA;;AAEA,MAAA,EAAA,CAAA,UAAA,CAAA,cAAA,EAAA,YAAA,CAAA,MAAA,EAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,QAAA,IAAA,CAAA,OAAA,GAAA,GAAA,CAAA,IAAA;AACA,OAFA;AAGA;AAnEA;AA1BA,CAAA","sourcesContent":["<template>\n  <div class=\"content\" v-if=\"statement\">\n    <div class=\"row mb-3\">\n      <div class=\"col-sm-6\">\n        <router-link\n            to=\"/payments\"\n        >\n          <img src=\"/assets/img/icon_back.png\"> <span class=\"back\">Back to Clinic Statement</span>\n        </router-link>\n      </div>\n    </div>\n\n    <div class=\"card\">\n      <div class=\"card-body\">\n        <div class=\"row mb-3\">\n          <div class=\"col-sm-3\">\n            <label>Statement NO.</label>\n            <input type=\"text\" class=\"form-control\" v-model=\"statement.statement_no\">\n          </div>\n          <div class=\"col-sm-3\">\n            <label>Sales Period</label>\n            <input type=\"date\" class=\"form-control\" v-model=\"statement.sale_period\">\n          </div>\n          <div class=\"col-sm-3\">\n            <label>Payment Date</label>\n            <input type=\"email\" class=\"form-control\" v-model=\"statement.payment_date\">\n          </div>\n        </div>\n\n        <div class=\"row mb-3\">\n          <div class=\"col-sm-3\">\n            <label>From</label>\n            <input type=\"text\" class=\"form-control\" v-model=\"statement.from_id\">\n          </div>\n          <div class=\"col-sm-3\">\n            <label>To</label>\n            <input type=\"text\" class=\"form-control\" v-model=\"statement.to_id\">\n          </div>\n        </div>\n\n        <table class=\"table\">\n          <thead>\n          <tr>\n            <th>Date</th>\n            <th>Name</th>\n            <th>Appointment No</th>\n            <th style=\"width: 120px; text-align: center\">Amount</th>\n            <th></th>\n          </tr>\n          </thead>\n          <tbody>\n          <tr v-for=\"(item, index) in statement.items\" :key=\"item.id\">\n            <td>\n              <input type=\"date\" class=\"form-control\" v-model=\"item.item_date\">\n            </td>\n            <td>\n              <input type=\"text\" class=\"form-control\" v-model=\"item.name\">\n            </td>\n            <td>\n              <input type=\"text\" class=\"form-control\" v-model=\"item.appointment_no\">\n            </td>\n            <td>\n              <input type=\"text\" class=\"form-control\" v-model=\"item.amount\">\n            </td>\n            <td>\n              <button class=\"btn btn-link\" @click=\"onRemoveItem(item.id, index)\"><i class=\"fa fa-trash\"></i></button>\n            </td>\n          </tr>\n          <tr>\n            <td colspan=\"3\" class=\"text-right\">Gross Sales</td>\n            <td><input type=\"number\" class=\"form-control\" v-model=\"statement.gross\"></td>\n            <td>\n              <button class=\"btn btn-link\" @click=\"onAddItem\"><i class=\"fa fa-plus\"></i></button>\n            </td>\n          </tr>\n          <tr>\n            <td colspan=\"3\" class=\"text-right\">Refund Sales</td>\n            <td><input type=\"number\" class=\"form-control\" v-model=\"statement.refund\"></td>\n            <td></td>\n          </tr>\n          <tr>\n            <td colspan=\"3\" class=\"text-right\">Hera Sales</td>\n            <td><input type=\"number\" class=\"form-control\" v-model=\"statement.fee\"></td>\n            <td></td>\n          </tr>\n          <tr>\n            <td colspan=\"3\" class=\"text-right\">Net</td>\n            <td><input type=\"number\" class=\"form-control\" v-model=\"statement.net\" readonly></td>\n          </tr>\n          </tbody>\n        </table>\n\n        <div class=\"row\">\n          <div class=\"col-sm-6\">\n            <button class=\"btn btn-success\" @click=\"onSend\">Send</button>\n          </div>\n          <div class=\"col-sm-6\">\n            <button class=\"btn btn-dark\" @click=\"onSaveDraft\">Save as Draft</button>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\n  import rf from \"../../api/RequestFactory\";\n\n  export default {\n    data() {\n      return {\n        id: null,\n        statement: {\n          id: null,\n          statement_no: '',\n          sale_period: '',\n          payment_date: '',\n          status: '',\n          gross: '',\n          refund: '',\n          fee: '',\n          net: '',\n          items: []\n        }\n      }\n    },\n    mounted() {\n      let self = this\n\n      self.id = self.$route.params.id\n      if (self.id) {\n        self.getDetail()\n      }\n    },\n    methods: {\n      getTotal() {\n        let self = this\n\n        let total = 0\n        self.statement.items.forEach((item) => {\n          total += item.total\n        })\n\n        return total\n      },\n      getDetail() {\n        let self = this\n\n        rf.getRequest('AdminRequest').getStatementDetail(self.id).then(res => {\n          self.statement = res.data\n        })\n      },\n      onAddItem() {\n        let self = this\n\n        self.statement.items.push({\n          id: null,\n          name: '',\n          price: '',\n          quantity: '',\n          total: ''\n        })\n      },\n      onRemoveItem(item_id, index) {\n        let self = this\n\n        var r = confirm(\"Are you want to remove this clinic?\");\n        if (r == true) {\n          if (self.id) {\n            rf.getRequest('AdminRequest').postRemovePaymentItem(self.id, {item_id}).then(res => {\n              self.statement = res.data\n            })\n          } else {\n            for (let i = 0; i < self.statement.items.length; i++) {\n              if (i == index) {\n                delete self.statement.items[i]\n              }\n            }\n          }\n        }\n      },\n      onSaveDraft() {\n        let self = this\n\n        let params = self.payment\n        params.id = self.id\n        params.status = 1 // Draft.\n\n        rf.getRequest('AdminRequest').postPayments(params).then(res => {\n          self.payment = res.data\n        })\n      },\n      onSend() {\n        let self = this\n        let params = self.payment\n        params.id = self.id\n        params.status = 2 // Publish.\n\n        rf.getRequest('AdminRequest').postPayments(params).then(res => {\n          self.payment = res.data\n        })\n      }\n    }\n  }\n</script>\n\n<style></style>\n"],"sourceRoot":"src/views/admin"}]}