{"remainingRequest":"/var/www/provider-stg.hera.health/node_modules/thread-loader/dist/cjs.js!/var/www/provider-stg.hera.health/node_modules/babel-loader/lib/index.js!/var/www/provider-stg.hera.health/node_modules/eslint-loader/index.js??ref--13-0!/var/www/provider-stg.hera.health/src/api/RequestFactory.js","dependencies":[{"path":"/var/www/provider-stg.hera.health/src/api/RequestFactory.js","mtime":1592408707500},{"path":"/var/www/provider-stg.hera.health/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/var/www/provider-stg.hera.health/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/var/www/provider-stg.hera.health/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/var/www/provider-stg.hera.health/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jbGFzc0NhbGxDaGVjayBmcm9tICIvdmFyL3d3dy9wcm92aWRlci1zdGcuaGVyYS5oZWFsdGgvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NsYXNzQ2FsbENoZWNrIjsKaW1wb3J0IF9jcmVhdGVDbGFzcyBmcm9tICIvdmFyL3d3dy9wcm92aWRlci1zdGcuaGVyYS5oZWFsdGgvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZUNsYXNzIjsKaW1wb3J0IFVzZXJSZXF1ZXN0IGZyb20gIi4vcmVxdWVzdC9Vc2VyUmVxdWVzdCI7CmltcG9ydCB1dGlscyBmcm9tICIuLi91dGlscy91dGlscyI7CmltcG9ydCBDb21tb25SZXF1ZXN0IGZyb20gIi4vcmVxdWVzdC9Db21tb25SZXF1ZXN0IjsKaW1wb3J0IEFkbWluUmVxdWVzdCBmcm9tICcuL3JlcXVlc3QvQWRtaW5SZXF1ZXN0JzsKdmFyIHJlcXVlc3RNYXAgPSB7CiAgQWRtaW5SZXF1ZXN0OiBBZG1pblJlcXVlc3QsCiAgVXNlclJlcXVlc3Q6IFVzZXJSZXF1ZXN0LAogIENvbW1vblJlcXVlc3Q6IENvbW1vblJlcXVlc3QKfTsKdmFyIGluc3RhbmNlcyA9IHt9OwoKdmFyIFJlcXVlc3RGYWN0b3J5ID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICBmdW5jdGlvbiBSZXF1ZXN0RmFjdG9yeSgpIHsKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBSZXF1ZXN0RmFjdG9yeSk7CiAgfQoKICBfY3JlYXRlQ2xhc3MoUmVxdWVzdEZhY3RvcnksIG51bGwsIFt7CiAgICBrZXk6ICJnZXRSZXF1ZXN0IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRSZXF1ZXN0KGNsYXNzbmFtZSkgewogICAgICBpZiAodXRpbHMuZ2V0TG9jYWxVc2VyKCkpIHsKICAgICAgICB3aW5kb3cuYXhpb3MuZGVmYXVsdHMuaGVhZGVycy5jb21tb25bJ0F1dGhvcml6YXRpb24nXSA9IHV0aWxzLmdldExvY2FsVXNlcigpLnRva2VuOwogICAgICB9CgogICAgICB3aW5kb3cuYXhpb3MuZGVmYXVsdHMuaGVhZGVycy5jb21tb25bJ0NvbnRlbnQtVHlwZSddID0gJ2FwcGxpY2F0aW9uL2pzb24nOwogICAgICB2YXIgUmVxdWVzdENsYXNzID0gcmVxdWVzdE1hcFtjbGFzc25hbWVdOwoKICAgICAgaWYgKCFSZXF1ZXN0Q2xhc3MpIHsKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgcmVxdWVzdCBjbGFzcyBuYW1lOiAnICsgY2xhc3NuYW1lKTsKICAgICAgfQoKICAgICAgdmFyIHJlcXVlc3RJbnN0YW5jZSA9IGluc3RhbmNlc1tjbGFzc25hbWVdOwoKICAgICAgaWYgKCFyZXF1ZXN0SW5zdGFuY2UpIHsKICAgICAgICByZXF1ZXN0SW5zdGFuY2UgPSBuZXcgUmVxdWVzdENsYXNzKCk7CiAgICAgICAgaW5zdGFuY2VzW2NsYXNzbmFtZV0gPSByZXF1ZXN0SW5zdGFuY2U7CiAgICAgIH0KCiAgICAgIHJldHVybiByZXF1ZXN0SW5zdGFuY2U7CiAgICB9CiAgfV0pOwoKICByZXR1cm4gUmVxdWVzdEZhY3Rvcnk7Cn0oKTsKCmV4cG9ydCB7IFJlcXVlc3RGYWN0b3J5IGFzIGRlZmF1bHQgfTs="},{"version":3,"sources":["/var/www/provider-stg.hera.health/src/api/RequestFactory.js"],"names":["UserRequest","utils","CommonRequest","AdminRequest","requestMap","instances","RequestFactory","classname","getLocalUser","window","axios","defaults","headers","common","token","RequestClass","Error","requestInstance"],"mappings":";;AAAA,OAAOA,WAAP,MAAwB,uBAAxB;AACA,OAAOC,KAAP,MAAkB,gBAAlB;AACA,OAAOC,aAAP,MAA0B,yBAA1B;AACA,OAAOC,YAAP,MAAyB,wBAAzB;AAEA,IAAMC,UAAU,GAAG;AACjBD,EAAAA,YAAY,EAAZA,YADiB;AAEjBH,EAAAA,WAAW,EAAXA,WAFiB;AAGjBE,EAAAA,aAAa,EAAbA;AAHiB,CAAnB;AAKA,IAAMG,SAAS,GAAG,EAAlB;;IAGqBC,c;;;;;;;+BAEDC,S,EAAW;AAC3B,UAAIN,KAAK,CAACO,YAAN,EAAJ,EAA0B;AACxBC,QAAAA,MAAM,CAACC,KAAP,CAAaC,QAAb,CAAsBC,OAAtB,CAA8BC,MAA9B,CAAqC,eAArC,IAAwDZ,KAAK,CAACO,YAAN,GAAqBM,KAA7E;AACD;;AAEDL,MAAAA,MAAM,CAACC,KAAP,CAAaC,QAAb,CAAsBC,OAAtB,CAA8BC,MAA9B,CAAqC,cAArC,IAAuD,kBAAvD;AACA,UAAIE,YAAY,GAAGX,UAAU,CAACG,SAAD,CAA7B;;AACA,UAAI,CAACQ,YAAL,EAAmB;AACjB,cAAM,IAAIC,KAAJ,CAAU,iCAAiCT,SAA3C,CAAN;AACD;;AAED,UAAIU,eAAe,GAAGZ,SAAS,CAACE,SAAD,CAA/B;;AACA,UAAI,CAACU,eAAL,EAAsB;AACpBA,QAAAA,eAAe,GAAG,IAAIF,YAAJ,EAAlB;AACAV,QAAAA,SAAS,CAACE,SAAD,CAAT,GAAuBU,eAAvB;AACD;;AACD,aAAOA,eAAP;AACD;;;;;;SAnBkBX,c","sourcesContent":["import UserRequest from \"./request/UserRequest\";\nimport utils from \"../utils/utils\";\nimport CommonRequest from \"./request/CommonRequest\";\nimport AdminRequest from './request/AdminRequest'\n\nconst requestMap = {\n  AdminRequest,\n  UserRequest,\n  CommonRequest\n}\nconst instances = {};\n\n\nexport default class RequestFactory {\n\n  static getRequest(classname) {\n    if (utils.getLocalUser()) {\n      window.axios.defaults.headers.common['Authorization'] = utils.getLocalUser().token;\n    }\n\n    window.axios.defaults.headers.common['Content-Type'] = 'application/json';\n    let RequestClass = requestMap[classname];\n    if (!RequestClass) {\n      throw new Error('Invalid request class name: ' + classname);\n    }\n\n    let requestInstance = instances[classname];\n    if (!requestInstance) {\n      requestInstance = new RequestClass();\n      instances[classname] = requestInstance;\n    }\n    return requestInstance;\n  }\n\n}"]}]}