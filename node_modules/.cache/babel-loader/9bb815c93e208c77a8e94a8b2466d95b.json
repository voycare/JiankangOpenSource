{"remainingRequest":"/var/www/provider.voycare.com/node_modules/thread-loader/dist/cjs.js!/var/www/provider.voycare.com/node_modules/babel-loader/lib/index.js!/var/www/provider.voycare.com/node_modules/cache-loader/dist/cjs.js??ref--0-0!/var/www/provider.voycare.com/node_modules/vue-loader/lib/index.js??vue-loader-options!/var/www/provider.voycare.com/src/views/admin/AdminClientPaymentEdit.vue?vue&type=script&lang=js&","dependencies":[{"path":"/var/www/provider.voycare.com/src/views/admin/AdminClientPaymentEdit.vue","mtime":1597939243736},{"path":"/var/www/provider.voycare.com/node_modules/cache-loader/dist/cjs.js","mtime":1596630677130},{"path":"/var/www/provider.voycare.com/node_modules/thread-loader/dist/cjs.js","mtime":1596630678838},{"path":"/var/www/provider.voycare.com/node_modules/babel-loader/lib/index.js","mtime":1596630688999},{"path":"/var/www/provider.voycare.com/node_modules/cache-loader/dist/cjs.js","mtime":1596630677130},{"path":"/var/www/provider.voycare.com/node_modules/vue-loader/lib/index.js","mtime":1596630687836}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zcGxpY2UiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHJmIGZyb20gIi4uLy4uL2FwaS9SZXF1ZXN0RmFjdG9yeSI7CmltcG9ydCBCYWNrVG8gZnJvbSAiLi4vLi4vY29tcG9uZW50cy9CYWNrVG8iOwppbXBvcnQgRGF0ZVBpY2tlciBmcm9tICJ2dWUyLWRhdGVwaWNrZXIiOwpleHBvcnQgZGVmYXVsdCB7CiAgY29tcG9uZW50czogewogICAgQmFja1RvOiBCYWNrVG8sCiAgICBEYXRlUGlja2VyOiBEYXRlUGlja2VyCiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgaWQ6IG51bGwsCiAgICAgIHBheW1lbnRfbWV0aG9kczogW3sKICAgICAgICBpZDogMSwKICAgICAgICBuYW1lOiAiVmlzYSIKICAgICAgfSwgewogICAgICAgIGlkOiAyLAogICAgICAgIG5hbWU6ICJBbGlwYXkiCiAgICAgIH0sIHsKICAgICAgICBpZDogMywKICAgICAgICBuYW1lOiAiV2VjaGF0IgogICAgICB9XSwKICAgICAgcGF5bWVudDogewogICAgICAgIGlkOiBudWxsLAogICAgICAgIG5hbWU6ICIiLAogICAgICAgIGVtYWlsOiAiIiwKICAgICAgICBjcmVhdGVkX2F0OiBudWxsLAogICAgICAgIHBheW1lbnRfdHlwZTogIiIsCiAgICAgICAgdHJhbnNhY3Rpb25faWQ6ICIiLAogICAgICAgIGl0ZW1zOiBbXQogICAgICB9CiAgICB9OwogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIHZhciBzZWxmID0gdGhpczsKICAgIHNlbGYuaWQgPSBzZWxmLiRyb3V0ZS5wYXJhbXMuaWQ7CgogICAgaWYgKHNlbGYuaWQpIHsKICAgICAgc2VsZi5nZXREZXRhaWwoKTsKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIGdldFRvdGFsOiBmdW5jdGlvbiBnZXRUb3RhbCgpIHsKICAgICAgdmFyIHNlbGYgPSB0aGlzOwogICAgICB2YXIgdG90YWwgPSAwOwogICAgICBzZWxmLnBheW1lbnQuaXRlbXMuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgIHRvdGFsICs9IGl0ZW0udG90YWw7CiAgICAgIH0pOwogICAgICByZXR1cm4gdG90YWw7CiAgICB9LAogICAgZ2V0RGV0YWlsOiBmdW5jdGlvbiBnZXREZXRhaWwoKSB7CiAgICAgIHZhciBzZWxmID0gdGhpczsKICAgICAgcmYuZ2V0UmVxdWVzdCgiQWRtaW5SZXF1ZXN0IikuZ2V0UGF5bWVudERldGFpbChzZWxmLmlkKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBzZWxmLnBheW1lbnQgPSByZXMuZGF0YTsKICAgICAgfSk7CiAgICB9LAogICAgb25BZGRJdGVtOiBmdW5jdGlvbiBvbkFkZEl0ZW0oKSB7CiAgICAgIHZhciBzZWxmID0gdGhpczsKICAgICAgc2VsZi5wYXltZW50Lml0ZW1zLnB1c2goewogICAgICAgIGlkOiBudWxsLAogICAgICAgIGl0ZW1fZGF0ZTogbmV3IERhdGUoKSwKICAgICAgICBpdGVtX25hbWU6ICIiLAogICAgICAgIGFwcG9pbnRtZW50X25vOiAiIiwKICAgICAgICBhbW91bnQ6IDAKICAgICAgfSk7CiAgICB9LAogICAgb25SZW1vdmVJdGVtOiBmdW5jdGlvbiBvblJlbW92ZUl0ZW0oaXRlbV9pZCwgaW5kZXgpIHsKICAgICAgdmFyIHNlbGYgPSB0aGlzOwogICAgICB2YXIgciA9IGNvbmZpcm0oIkFyZSB5b3Ugd2FudCB0byByZW1vdmUgdGhpcyBjbGluaWM/Iik7CgogICAgICBpZiAociA9PSB0cnVlKSB7CiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzZWxmLnBheW1lbnQuaXRlbXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgIGlmIChpID09IGluZGV4KSB7CiAgICAgICAgICAgIHNlbGYucGF5bWVudC5pdGVtcy5zcGxpY2UoaSwgMSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgb25TYXZlRHJhZnQ6IGZ1bmN0aW9uIG9uU2F2ZURyYWZ0KCkgewogICAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICAgIHZhciBwYXJhbXMgPSBzZWxmLnBheW1lbnQ7CiAgICAgIHBhcmFtcy5pZCA9IHNlbGYuaWQ7CiAgICAgIHBhcmFtcy5zdGF0dXMgPSAxOyAvLyBEcmFmdC4KCiAgICAgIHJmLmdldFJlcXVlc3QoIkFkbWluUmVxdWVzdCIpLnBvc3RQYXltZW50cyhwYXJhbXMpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIHNlbGYucGF5bWVudCA9IHJlcy5kYXRhOwogICAgICB9KTsKICAgIH0sCiAgICBvblNlbmQ6IGZ1bmN0aW9uIG9uU2VuZCgpIHsKICAgICAgdmFyIHNlbGYgPSB0aGlzOwogICAgICB2YXIgcGFyYW1zID0gc2VsZi5wYXltZW50OwogICAgICBwYXJhbXMuaWQgPSBzZWxmLmlkOwogICAgICBwYXJhbXMuc3RhdHVzID0gMjsgLy8gUHVibGlzaC4KCiAgICAgIHJmLmdldFJlcXVlc3QoIkFkbWluUmVxdWVzdCIpLnBvc3RQYXltZW50cyhwYXJhbXMpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIHNlbGYucGF5bWVudCA9IHJlcy5kYXRhOwogICAgICB9KTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["AdminClientPaymentEdit.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div v-if=\"payment\">\n    <div class=\"row mb-3\">\n      <div class=\"col-sm-6\">\n        <BackTo :to=\"'/payments'\" :text=\"'Back to Client Invoice'\" />\n      </div>\n    </div>\n    <div class=\"card\">\n      <div class=\"card-body\">\n        <div class=\"d-flex justify-content-between\">\n          <span class=\"title-18\">Create Invoice</span>\n          <div class=\"text-right\">\n            <div class=\"form-inline\">\n              <div class=\"form-group mb-2\">\n                <label style=\"line-height: 38px; margin-bottom: 10px;\">Invoice NO. </label>\n                <input type=\"text\" class=\"form-control\" v-model=\"payment.id\" />\n              </div>\n            </div>\n          </div>\n        </div>\n        <div class=\"row mb-3\">\n          <div class=\"col-sm-3\">\n            <label>Hera ID</label>\n            <input type=\"text\" class=\"form-control\" v-model=\"payment.id\" />\n          </div>\n          <div class=\"col-sm-3\">\n            <label>Name</label>\n            <input type=\"text\" class=\"form-control\" v-model=\"payment.name\" />\n          </div>\n          <div class=\"col-sm-3\">\n            <label>Email</label>\n            <input type=\"email\" class=\"form-control\" v-model=\"payment.email\" />\n          </div>\n          <div class=\"col-sm-3\">\n            <label>Order Date</label>\n            <date-picker\n              style=\"width: 100%;\"\n              v-model=\"payment.created_at\"\n              :default-value=\"new Date()\"\n              value-type=\"timestamp\"\n            ></date-picker>\n          </div>\n        </div>\n        <div class=\"row mb-3\">\n          <div class=\"col-sm-3\">\n            <label>Total Paid</label>\n            <input type=\"text\" class=\"form-control\" v-model=\"payment.total\" />\n          </div>\n          <div class=\"col-sm-3\">\n            <label>Payment Method</label>\n            <select class=\"form-control\" v-model=\"payment.payment_type\">\n              <option\n                :value=\"payment_method.id\"\n                v-for=\"payment_method in payment_methods\"\n                :key=\"payment_method.id\"\n              >{{ payment_method.name }}</option>\n            </select>\n          </div>\n          <div class=\"col-sm-3\">\n            <label>Payment Transaction ID</label>\n            <input type=\"text\" class=\"form-control\" v-model=\"payment.transaction_id\" />\n          </div>\n        </div>\n        <div class=\"card\">\n          <div class=\"card-body\">\n            <table class=\"table\">\n              <thead>\n                <tr>\n                  <th>#</th>\n                  <th>Item</th>\n                  <th>Clinic</th>\n                  <th>Price</th>\n                  <th>Qty</th>\n                  <th>Total</th>\n                  <th></th>\n                </tr>\n              </thead>\n              <tbody>\n                <tr v-for=\"(item, index) in payment.items\" :key=\"item.id\">\n                  <td class=\"align-middle\">\n                    <span class=\"d-block\" style=\"margin-bottom: 10px;\">{{ item.id }}</span>\n                    </td>\n                  <td>\n                    <input type=\"text\" class=\"form-control\" v-model=\"item.name\" />\n                  </td>\n                  <td>\n                    <input type=\"text\" class=\"form-control\" v-model=\"item.clinic_id\" />\n                  </td>\n                  <td>\n                    <input type=\"text\" class=\"form-control\" v-model=\"item.price\" />\n                  </td>\n                  <td>\n                    <input type=\"text\" class=\"form-control\" v-model=\"item.quantity\" />\n                  </td>\n                  <td>\n                    <input type=\"text\" class=\"form-control\" v-model=\"item.total\" />\n                  </td>\n                  <td>\n                    <button class=\"btn btn-link\" @click=\"onRemoveItem(item.id, index)\">\n                      <i class=\"fa fa-trash\"></i>\n                    </button>\n                  </td>\n                </tr>\n                <tr>\n                  <td colspan=\"5\" class=\"text-right\" style=\"vertical-align: middle;\">\n                    <strong>Total Paid</strong>\n                  </td>\n                  <td style=\"vertical-align: middle;\">\n                    <input\n                      type=\"text\"\n                      class=\"form-control\"\n                      readonly\n                      :value=\"getTotal()\"\n                      style=\"margin-bottom: 0;\"\n                    />\n                  </td>\n                  <td>\n                    <button class=\"btn btn-link\" @click=\"onAddItem\">\n                      <i class=\"fa fa-plus mr-2\"></i>\n                    </button>\n                  </td>\n                </tr>\n              </tbody>\n            </table>\n          </div>\n        </div>\n        <div class=\"d-flex justify-content-center\">\n          <button\n            style=\"width: 200px;\"\n            class=\"btn btn-success mr-5 btn-rounded\"\n            @click=\"onSend\"\n          >Send</button>\n          <button\n            style=\"width: 200px;\"\n            class=\"btn btn-dark btn-rounded\"\n            @click=\"onSaveDraft\"\n          >Save as Draft</button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport rf from \"../../api/RequestFactory\";\nimport BackTo from \"../../components/BackTo\";\nimport DatePicker from \"vue2-datepicker\";\n\nexport default {\n  components: { BackTo, DatePicker },\n  data() {\n    return {\n      id: null,\n      payment_methods: [\n        { id: 1, name: \"Visa\" },\n        { id: 2, name: \"Alipay\" },\n        { id: 3, name: \"Wechat\" },\n      ],\n      payment: {\n        id: null,\n        name: \"\",\n        email: \"\",\n        created_at: null,\n        payment_type: \"\",\n        transaction_id: \"\",\n        items: [],\n      },\n    };\n  },\n  mounted() {\n    let self = this;\n\n    self.id = self.$route.params.id;\n    if (self.id) {\n      self.getDetail();\n    }\n  },\n  methods: {\n    getTotal() {\n      let self = this;\n\n      let total = 0;\n      self.payment.items.forEach((item) => {\n        total += item.total;\n      });\n\n      return total;\n    },\n    getDetail() {\n      let self = this;\n\n      rf.getRequest(\"AdminRequest\")\n        .getPaymentDetail(self.id)\n        .then((res) => {\n          self.payment = res.data;\n        });\n    },\n    onAddItem() {\n      let self = this;\n\n      self.payment.items.push({\n        id: null,\n        item_date: new Date(),\n        item_name: \"\",\n        appointment_no: \"\",\n        amount: 0,\n      });\n    },\n    onRemoveItem(item_id, index) {\n      let self = this;\n\n      var r = confirm(\"Are you want to remove this clinic?\");\n      if (r == true) {\n        for (let i = 0; i < self.payment.items.length; i++) {\n          if (i == index) {\n            self.payment.items.splice(i, 1)\n          }\n        }\n      }\n    },\n    onSaveDraft() {\n      let self = this;\n\n      let params = self.payment;\n      params.id = self.id;\n      params.status = 1; // Draft.\n\n      rf.getRequest(\"AdminRequest\")\n        .postPayments(params)\n        .then((res) => {\n          self.payment = res.data;\n        });\n    },\n    onSend() {\n      let self = this;\n      let params = self.payment;\n      params.id = self.id;\n      params.status = 2; // Publish.\n\n      rf.getRequest(\"AdminRequest\")\n        .postPayments(params)\n        .then((res) => {\n          self.payment = res.data;\n        });\n    },\n  },\n};\n</script>\n\n<style scopde>\n.card-body {\n  padding: 34px 46px 42px 32px;\n}\n</style>\n"],"sourceRoot":"src/views/admin"}]}