{"remainingRequest":"/var/www/provider-stg.hera.health/node_modules/vue-loader/lib/index.js??vue-loader-options!/var/www/provider-stg.hera.health/src/views/clients/PaymentDetail.vue?vue&type=script&lang=js&","dependencies":[{"path":"/var/www/provider-stg.hera.health/src/views/clients/PaymentDetail.vue","mtime":1591913440913},{"path":"/var/www/provider-stg.hera.health/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/var/www/provider-stg.hera.health/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/var/www/provider-stg.hera.health/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/var/www/provider-stg.hera.health/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/var/www/provider-stg.hera.health/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBodG1sMmNhbnZhcyBmcm9tICdodG1sMmNhbnZhcycKaW1wb3J0IGpzUERGIGZyb20gJ2pzcGRmJwppbXBvcnQgcHJpbnRKUyBmcm9tICdwcmludC1qcycKaW1wb3J0IHJmIGZyb20gIi4uLy4uL2FwaS9SZXF1ZXN0RmFjdG9yeSI7CmltcG9ydCBDb25zdCBmcm9tICIuLy4uLy4uL3V0aWxzL2NvbnN0IgoKZXhwb3J0IGRlZmF1bHQgewogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBwcmludEpTLAogICAgICBDb25zdCwKICAgICAgcGF5bWVudDogbnVsbAogICAgfQogIH0sCiAgbW91bnRlZCgpIHsKICAgIGxldCBzZWxmID0gdGhpcwogICAgbGV0IGlkID0gcGFyc2VJbnQodGhpcy4kcm91dGUucGFyYW1zLmlkKQoKICAgIHJmLmdldFJlcXVlc3QoJ1VzZXJSZXF1ZXN0JykuZ2V0UGF5bWVudERldGFpbChpZCkudGhlbigocmVzKSA9PiB7CiAgICAgIHNlbGYucGF5bWVudCA9IHJlcy5kYXRhOwogICAgfSkKICB9LAogIG1ldGhvZHM6IHsKICAgIG9uRG93bmxvYWRQREYoKSB7CiAgICAgIGxldCBzZWxmID0gdGhpcwoKICAgICAgaHRtbDJjYW52YXMoZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiI3BheW1lbnRfX2Zvcm0iKSkudGhlbihjYW52YXMgPT4gewogICAgICAgIGxldCBwZGYgPSBzZWxmLmdldFBERihjYW52YXMpCiAgICAgICAgcGRmLnNhdmUoImludm9pY2UucGRmIik7CiAgICAgIH0pOwogICAgfSwKICAgIG9uUHJpbnRKUygpIHsKICAgICAgbGV0IHNlbGYgPSB0aGlzCgogICAgICBodG1sMmNhbnZhcyhkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIjcGF5bWVudF9fZm9ybSIpKS50aGVuKGNhbnZhcyA9PiB7CiAgICAgICAgdmFyIGltZ0RhdGEgPSBjYW52YXMudG9EYXRhVVJMKCJpbWFnZS9qcGVnIiwgMSk7CiAgICAgICAgLy8gd2luZG93Lm9wZW4ocGRmLm91dHB1dCgnYmxvYnVybCcpLCAnX2JsYW5rJyk7CiAgICAgICAgcHJpbnRKUyh7CiAgICAgICAgICBwcmludGFibGU6IGltZ0RhdGEsCiAgICAgICAgICB0eXBlOiAnaW1hZ2UnCiAgICAgICAgfSkKICAgICAgfSk7CiAgICB9LAogICAgZ2V0UERGKGNhbnZhcykgewogICAgICBsZXQgc2VsZiA9IHRoaXMKICAgICAgdmFyIGltZ0RhdGEgPSBjYW52YXMudG9EYXRhVVJMKCJpbWFnZS9qcGVnIiwgMSk7CiAgICAgIHZhciBwZGYgPSBuZXcganNQREYoInAiLCAibW0iLCAiYTQiKTsKICAgICAgdmFyIHBhZ2VXaWR0aCA9IHBkZi5pbnRlcm5hbC5wYWdlU2l6ZS5nZXRXaWR0aCgpOwogICAgICB2YXIgcGFnZUhlaWdodCA9IHBkZi5pbnRlcm5hbC5wYWdlU2l6ZS5nZXRIZWlnaHQoKTsKICAgICAgdmFyIGltYWdlV2lkdGggPSBjYW52YXMud2lkdGg7CiAgICAgIHZhciBpbWFnZUhlaWdodCA9IGNhbnZhcy5oZWlnaHQ7CgogICAgICB2YXIgcmF0aW8gPSBpbWFnZVdpZHRoIC8gaW1hZ2VIZWlnaHQgPj0gcGFnZVdpZHRoIC8gcGFnZUhlaWdodCA/IHBhZ2VXaWR0aCAvIGltYWdlV2lkdGggOiBwYWdlSGVpZ2h0IC8gaW1hZ2VIZWlnaHQ7CiAgICAgIHBkZi5hZGRJbWFnZShpbWdEYXRhLCAnSlBFRycsIDAsIDAsIGltYWdlV2lkdGggKiByYXRpbywgaW1hZ2VIZWlnaHQgKiByYXRpbyk7CgogICAgICByZXR1cm4gcGRmCiAgICB9CiAgfQp9Cg=="},{"version":3,"sources":["PaymentDetail.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8GA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA","file":"PaymentDetail.vue","sourceRoot":"src/views/clients","sourcesContent":["<template>\n    <div>\n        <div class=\"row\">\n            <div class=\"col-sm-5 col-4\">\n                <router-link to=\"/payments\"><h4 class=\"page-title\"><i class=\"fa fa-arrow-left mr-3\"></i>Back to\n                    Payments</h4></router-link>\n            </div>\n            <div class=\"col-sm-7 col-8 text-right m-b-30\">\n                <div class=\"btn-group btn-group-sm\">\n                    <button class=\"btn btn-white\" @click=\"onDownloadPDF\">PDF</button>\n                    <button class=\"btn btn-white\" @click=\"onPrintJS\"><i class=\"fa fa-print fa-lg\"></i> Print</button>\n                </div>\n            </div>\n        </div>\n\n        <div class=\"row\">\n            <div class=\"col-sm-12\">\n                <div class=\"card\" v-if=\"payment\" id=\"payment__form\">\n                    <div class=\"card-body\">\n                        <div class=\"row custom-invoice\">\n                            <div class=\"col-6 col-sm-6 m-b-20\">\n                                <img src=\"assets/img/title.png\" class=\"inv-logo\" alt=\"\">\n                            </div>\n                            <div class=\"col-6 col-sm-6 m-b-20\">\n                                <div class=\"invoice-details\">\n                                    <span class=\"title-20 text-uppercase\">INVOICE {{ payment.id | convertInvoiceID}}</span>\n\n                                    <ul class=\"list-unstyled\">\n                                        <li class=\"desc-15\">Order Date: {{ payment.created_at | convertTimeSecondToDate}}\n                                        </li>\n                                    </ul>\n                                </div>\n                            </div>\n                        </div>\n                        <div class=\"row\">\n                            <div class=\"col-sm-6 col-lg-6 m-b-20\">\n                                <ul class=\"list-unstyled\">\n                                    <li>Hera ID: {{ payment.client.id }}</li>\n                                    <li>Name: {{ payment.client.name }}</li>\n                                    <li>Email: {{ payment.client.email }}</li>\n                                </ul>\n                            </div>\n                            <div class=\"col-sm-6 col-lg-6 m-b-20\">\n                                <div class=\"invoices-view\">\n                                    <ul class=\"list-unstyled invoice-payment-details\">\n                                        <li>Payment Details:</li>\n                                        <li>\n                                            <div class=\"row\">\n                                                <div class=\"col-sm-6\"><b>Total Paid:</b></div>\n                                                <div class=\"col-sm-6\"><b>{{ payment.total | formatMoney }}</b></div>\n                                            </div>\n                                        </li>\n                                        <li>\n                                            <div class=\"row\">\n                                                <div class=\"col-sm-6\">Payment Method:</div>\n                                                <div class=\"col-sm-6\">{{ payment.payment_type_name }}</div>\n                                            </div></li>\n                                        <li>Payment Transaction ID:</li>\n                                    </ul>\n                                </div>\n                            </div>\n                        </div>\n                        <table class=\"table mb-0 border-0 table--payment\">\n                            <thead>\n                            <tr>\n                                <th>#</th>\n                                <th>Item</th>\n                                <th>Clinic</th>\n                                <th>Price</th>\n                            </tr>\n                            </thead>\n                            <tbody>\n                            <tr v-for=\"item in payment.items\" :key=\"item.id\">\n                                <td>{{ item.id }}</td>\n                                <td><span v-if=\"item.clinic\">{{ item.clinic.name }}</span></td>\n                                <td>{{ item.price }}</td>\n                                <td>{{ item.quantity }}</td>\n                            </tr>\n                            </tbody>\n                        </table>\n\n                        <div>\n                            <div class=\"row invoice-payment\">\n                                <div class=\"col-sm-7\">\n                                </div>\n                                <div class=\"col-sm-5\">\n                                    <div class=\"m-b-20\">\n                                        <div class=\"table-responsive no-border\">\n                                            <table class=\"table mb-0 payment--total\">\n                                                <tbody>\n                                                <tr>\n                                                    <td>Total:</td>\n                                                    <td class=\"text-right text-primary\">{{ payment.total | formatMoney\n                                                        }}\n                                                    </td>\n                                                </tr>\n                                                </tbody>\n                                            </table>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</template>\n<script>\n  import html2canvas from 'html2canvas'\n  import jsPDF from 'jspdf'\n  import printJS from 'print-js'\n  import rf from \"../../api/RequestFactory\";\n  import Const from \"./../../utils/const\"\n\n  export default {\n    data() {\n      return {\n        printJS,\n        Const,\n        payment: null\n      }\n    },\n    mounted() {\n      let self = this\n      let id = parseInt(this.$route.params.id)\n\n      rf.getRequest('UserRequest').getPaymentDetail(id).then((res) => {\n        self.payment = res.data;\n      })\n    },\n    methods: {\n      onDownloadPDF() {\n        let self = this\n\n        html2canvas(document.querySelector(\"#payment__form\")).then(canvas => {\n          let pdf = self.getPDF(canvas)\n          pdf.save(\"invoice.pdf\");\n        });\n      },\n      onPrintJS() {\n        let self = this\n\n        html2canvas(document.querySelector(\"#payment__form\")).then(canvas => {\n          var imgData = canvas.toDataURL(\"image/jpeg\", 1);\n          // window.open(pdf.output('bloburl'), '_blank');\n          printJS({\n            printable: imgData,\n            type: 'image'\n          })\n        });\n      },\n      getPDF(canvas) {\n        let self = this\n        var imgData = canvas.toDataURL(\"image/jpeg\", 1);\n        var pdf = new jsPDF(\"p\", \"mm\", \"a4\");\n        var pageWidth = pdf.internal.pageSize.getWidth();\n        var pageHeight = pdf.internal.pageSize.getHeight();\n        var imageWidth = canvas.width;\n        var imageHeight = canvas.height;\n\n        var ratio = imageWidth / imageHeight >= pageWidth / pageHeight ? pageWidth / imageWidth : pageHeight / imageHeight;\n        pdf.addImage(imgData, 'JPEG', 0, 0, imageWidth * ratio, imageHeight * ratio);\n\n        return pdf\n      }\n    }\n  }\n</script>\n<style>\n    .appt--detail td {\n        color: #434343;\n        border-top: 0px;\n        padding-top: 10px;\n        padding-bottom: 10px;\n    }\n\n    .appt--labels {\n        color: #020644 !important;\n    }\n\n    .table--payment thead {\n        border-top: 1px solid #979797;\n        border-bottom: 1px solid #979797;\n        background-color: #E5E5E5\n    }\n\n    .table--payment th {\n        color: #434343;\n        font-weight: 700;\n    }\n\n    .payment--total {\n        font-weight: bold;\n        font-size: 18px;\n        line-height: 27px;\n        background: #E5E5E5;\n        border: 1px solid #434343;\n    }\n\n    .table td, .table th {\n        border-top: 0px;\n    }\n</style>"]}]}