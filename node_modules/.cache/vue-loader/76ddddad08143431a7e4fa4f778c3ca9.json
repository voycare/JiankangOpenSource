{"remainingRequest":"/var/www/provider.voycare.com/node_modules/vue-loader/lib/index.js??vue-loader-options!/var/www/provider.voycare.com/src/views/admin/AdminClientPaymentEdit.vue?vue&type=script&lang=js&","dependencies":[{"path":"/var/www/provider.voycare.com/src/views/admin/AdminClientPaymentEdit.vue","mtime":1597939243736},{"path":"/var/www/provider.voycare.com/node_modules/cache-loader/dist/cjs.js","mtime":1596630677130},{"path":"/var/www/provider.voycare.com/node_modules/thread-loader/dist/cjs.js","mtime":1596630678838},{"path":"/var/www/provider.voycare.com/node_modules/babel-loader/lib/index.js","mtime":1596630688999},{"path":"/var/www/provider.voycare.com/node_modules/cache-loader/dist/cjs.js","mtime":1596630677130},{"path":"/var/www/provider.voycare.com/node_modules/vue-loader/lib/index.js","mtime":1596630687836}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCByZiBmcm9tICIuLi8uLi9hcGkvUmVxdWVzdEZhY3RvcnkiOwppbXBvcnQgQmFja1RvIGZyb20gIi4uLy4uL2NvbXBvbmVudHMvQmFja1RvIjsKaW1wb3J0IERhdGVQaWNrZXIgZnJvbSAidnVlMi1kYXRlcGlja2VyIjsKCmV4cG9ydCBkZWZhdWx0IHsKICBjb21wb25lbnRzOiB7IEJhY2tUbywgRGF0ZVBpY2tlciB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBpZDogbnVsbCwKICAgICAgcGF5bWVudF9tZXRob2RzOiBbCiAgICAgICAgeyBpZDogMSwgbmFtZTogIlZpc2EiIH0sCiAgICAgICAgeyBpZDogMiwgbmFtZTogIkFsaXBheSIgfSwKICAgICAgICB7IGlkOiAzLCBuYW1lOiAiV2VjaGF0IiB9LAogICAgICBdLAogICAgICBwYXltZW50OiB7CiAgICAgICAgaWQ6IG51bGwsCiAgICAgICAgbmFtZTogIiIsCiAgICAgICAgZW1haWw6ICIiLAogICAgICAgIGNyZWF0ZWRfYXQ6IG51bGwsCiAgICAgICAgcGF5bWVudF90eXBlOiAiIiwKICAgICAgICB0cmFuc2FjdGlvbl9pZDogIiIsCiAgICAgICAgaXRlbXM6IFtdLAogICAgICB9LAogICAgfTsKICB9LAogIG1vdW50ZWQoKSB7CiAgICBsZXQgc2VsZiA9IHRoaXM7CgogICAgc2VsZi5pZCA9IHNlbGYuJHJvdXRlLnBhcmFtcy5pZDsKICAgIGlmIChzZWxmLmlkKSB7CiAgICAgIHNlbGYuZ2V0RGV0YWlsKCk7CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBnZXRUb3RhbCgpIHsKICAgICAgbGV0IHNlbGYgPSB0aGlzOwoKICAgICAgbGV0IHRvdGFsID0gMDsKICAgICAgc2VsZi5wYXltZW50Lml0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHsKICAgICAgICB0b3RhbCArPSBpdGVtLnRvdGFsOwogICAgICB9KTsKCiAgICAgIHJldHVybiB0b3RhbDsKICAgIH0sCiAgICBnZXREZXRhaWwoKSB7CiAgICAgIGxldCBzZWxmID0gdGhpczsKCiAgICAgIHJmLmdldFJlcXVlc3QoIkFkbWluUmVxdWVzdCIpCiAgICAgICAgLmdldFBheW1lbnREZXRhaWwoc2VsZi5pZCkKICAgICAgICAudGhlbigocmVzKSA9PiB7CiAgICAgICAgICBzZWxmLnBheW1lbnQgPSByZXMuZGF0YTsKICAgICAgICB9KTsKICAgIH0sCiAgICBvbkFkZEl0ZW0oKSB7CiAgICAgIGxldCBzZWxmID0gdGhpczsKCiAgICAgIHNlbGYucGF5bWVudC5pdGVtcy5wdXNoKHsKICAgICAgICBpZDogbnVsbCwKICAgICAgICBpdGVtX2RhdGU6IG5ldyBEYXRlKCksCiAgICAgICAgaXRlbV9uYW1lOiAiIiwKICAgICAgICBhcHBvaW50bWVudF9ubzogIiIsCiAgICAgICAgYW1vdW50OiAwLAogICAgICB9KTsKICAgIH0sCiAgICBvblJlbW92ZUl0ZW0oaXRlbV9pZCwgaW5kZXgpIHsKICAgICAgbGV0IHNlbGYgPSB0aGlzOwoKICAgICAgdmFyIHIgPSBjb25maXJtKCJBcmUgeW91IHdhbnQgdG8gcmVtb3ZlIHRoaXMgY2xpbmljPyIpOwogICAgICBpZiAociA9PSB0cnVlKSB7CiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzZWxmLnBheW1lbnQuaXRlbXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgIGlmIChpID09IGluZGV4KSB7CiAgICAgICAgICAgIHNlbGYucGF5bWVudC5pdGVtcy5zcGxpY2UoaSwgMSkKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICBvblNhdmVEcmFmdCgpIHsKICAgICAgbGV0IHNlbGYgPSB0aGlzOwoKICAgICAgbGV0IHBhcmFtcyA9IHNlbGYucGF5bWVudDsKICAgICAgcGFyYW1zLmlkID0gc2VsZi5pZDsKICAgICAgcGFyYW1zLnN0YXR1cyA9IDE7IC8vIERyYWZ0LgoKICAgICAgcmYuZ2V0UmVxdWVzdCgiQWRtaW5SZXF1ZXN0IikKICAgICAgICAucG9zdFBheW1lbnRzKHBhcmFtcykKICAgICAgICAudGhlbigocmVzKSA9PiB7CiAgICAgICAgICBzZWxmLnBheW1lbnQgPSByZXMuZGF0YTsKICAgICAgICB9KTsKICAgIH0sCiAgICBvblNlbmQoKSB7CiAgICAgIGxldCBzZWxmID0gdGhpczsKICAgICAgbGV0IHBhcmFtcyA9IHNlbGYucGF5bWVudDsKICAgICAgcGFyYW1zLmlkID0gc2VsZi5pZDsKICAgICAgcGFyYW1zLnN0YXR1cyA9IDI7IC8vIFB1Ymxpc2guCgogICAgICByZi5nZXRSZXF1ZXN0KCJBZG1pblJlcXVlc3QiKQogICAgICAgIC5wb3N0UGF5bWVudHMocGFyYW1zKQogICAgICAgIC50aGVuKChyZXMpID0+IHsKICAgICAgICAgIHNlbGYucGF5bWVudCA9IHJlcy5kYXRhOwogICAgICAgIH0pOwogICAgfSwKICB9LAp9Owo="},{"version":3,"sources":["AdminClientPaymentEdit.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgJA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"AdminClientPaymentEdit.vue","sourceRoot":"src/views/admin","sourcesContent":["<template>\n  <div v-if=\"payment\">\n    <div class=\"row mb-3\">\n      <div class=\"col-sm-6\">\n        <BackTo :to=\"'/payments'\" :text=\"'Back to Client Invoice'\" />\n      </div>\n    </div>\n    <div class=\"card\">\n      <div class=\"card-body\">\n        <div class=\"d-flex justify-content-between\">\n          <span class=\"title-18\">Create Invoice</span>\n          <div class=\"text-right\">\n            <div class=\"form-inline\">\n              <div class=\"form-group mb-2\">\n                <label style=\"line-height: 38px; margin-bottom: 10px;\">Invoice NO. </label>\n                <input type=\"text\" class=\"form-control\" v-model=\"payment.id\" />\n              </div>\n            </div>\n          </div>\n        </div>\n        <div class=\"row mb-3\">\n          <div class=\"col-sm-3\">\n            <label>Hera ID</label>\n            <input type=\"text\" class=\"form-control\" v-model=\"payment.id\" />\n          </div>\n          <div class=\"col-sm-3\">\n            <label>Name</label>\n            <input type=\"text\" class=\"form-control\" v-model=\"payment.name\" />\n          </div>\n          <div class=\"col-sm-3\">\n            <label>Email</label>\n            <input type=\"email\" class=\"form-control\" v-model=\"payment.email\" />\n          </div>\n          <div class=\"col-sm-3\">\n            <label>Order Date</label>\n            <date-picker\n              style=\"width: 100%;\"\n              v-model=\"payment.created_at\"\n              :default-value=\"new Date()\"\n              value-type=\"timestamp\"\n            ></date-picker>\n          </div>\n        </div>\n        <div class=\"row mb-3\">\n          <div class=\"col-sm-3\">\n            <label>Total Paid</label>\n            <input type=\"text\" class=\"form-control\" v-model=\"payment.total\" />\n          </div>\n          <div class=\"col-sm-3\">\n            <label>Payment Method</label>\n            <select class=\"form-control\" v-model=\"payment.payment_type\">\n              <option\n                :value=\"payment_method.id\"\n                v-for=\"payment_method in payment_methods\"\n                :key=\"payment_method.id\"\n              >{{ payment_method.name }}</option>\n            </select>\n          </div>\n          <div class=\"col-sm-3\">\n            <label>Payment Transaction ID</label>\n            <input type=\"text\" class=\"form-control\" v-model=\"payment.transaction_id\" />\n          </div>\n        </div>\n        <div class=\"card\">\n          <div class=\"card-body\">\n            <table class=\"table\">\n              <thead>\n                <tr>\n                  <th>#</th>\n                  <th>Item</th>\n                  <th>Clinic</th>\n                  <th>Price</th>\n                  <th>Qty</th>\n                  <th>Total</th>\n                  <th></th>\n                </tr>\n              </thead>\n              <tbody>\n                <tr v-for=\"(item, index) in payment.items\" :key=\"item.id\">\n                  <td class=\"align-middle\">\n                    <span class=\"d-block\" style=\"margin-bottom: 10px;\">{{ item.id }}</span>\n                    </td>\n                  <td>\n                    <input type=\"text\" class=\"form-control\" v-model=\"item.name\" />\n                  </td>\n                  <td>\n                    <input type=\"text\" class=\"form-control\" v-model=\"item.clinic_id\" />\n                  </td>\n                  <td>\n                    <input type=\"text\" class=\"form-control\" v-model=\"item.price\" />\n                  </td>\n                  <td>\n                    <input type=\"text\" class=\"form-control\" v-model=\"item.quantity\" />\n                  </td>\n                  <td>\n                    <input type=\"text\" class=\"form-control\" v-model=\"item.total\" />\n                  </td>\n                  <td>\n                    <button class=\"btn btn-link\" @click=\"onRemoveItem(item.id, index)\">\n                      <i class=\"fa fa-trash\"></i>\n                    </button>\n                  </td>\n                </tr>\n                <tr>\n                  <td colspan=\"5\" class=\"text-right\" style=\"vertical-align: middle;\">\n                    <strong>Total Paid</strong>\n                  </td>\n                  <td style=\"vertical-align: middle;\">\n                    <input\n                      type=\"text\"\n                      class=\"form-control\"\n                      readonly\n                      :value=\"getTotal()\"\n                      style=\"margin-bottom: 0;\"\n                    />\n                  </td>\n                  <td>\n                    <button class=\"btn btn-link\" @click=\"onAddItem\">\n                      <i class=\"fa fa-plus mr-2\"></i>\n                    </button>\n                  </td>\n                </tr>\n              </tbody>\n            </table>\n          </div>\n        </div>\n        <div class=\"d-flex justify-content-center\">\n          <button\n            style=\"width: 200px;\"\n            class=\"btn btn-success mr-5 btn-rounded\"\n            @click=\"onSend\"\n          >Send</button>\n          <button\n            style=\"width: 200px;\"\n            class=\"btn btn-dark btn-rounded\"\n            @click=\"onSaveDraft\"\n          >Save as Draft</button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport rf from \"../../api/RequestFactory\";\nimport BackTo from \"../../components/BackTo\";\nimport DatePicker from \"vue2-datepicker\";\n\nexport default {\n  components: { BackTo, DatePicker },\n  data() {\n    return {\n      id: null,\n      payment_methods: [\n        { id: 1, name: \"Visa\" },\n        { id: 2, name: \"Alipay\" },\n        { id: 3, name: \"Wechat\" },\n      ],\n      payment: {\n        id: null,\n        name: \"\",\n        email: \"\",\n        created_at: null,\n        payment_type: \"\",\n        transaction_id: \"\",\n        items: [],\n      },\n    };\n  },\n  mounted() {\n    let self = this;\n\n    self.id = self.$route.params.id;\n    if (self.id) {\n      self.getDetail();\n    }\n  },\n  methods: {\n    getTotal() {\n      let self = this;\n\n      let total = 0;\n      self.payment.items.forEach((item) => {\n        total += item.total;\n      });\n\n      return total;\n    },\n    getDetail() {\n      let self = this;\n\n      rf.getRequest(\"AdminRequest\")\n        .getPaymentDetail(self.id)\n        .then((res) => {\n          self.payment = res.data;\n        });\n    },\n    onAddItem() {\n      let self = this;\n\n      self.payment.items.push({\n        id: null,\n        item_date: new Date(),\n        item_name: \"\",\n        appointment_no: \"\",\n        amount: 0,\n      });\n    },\n    onRemoveItem(item_id, index) {\n      let self = this;\n\n      var r = confirm(\"Are you want to remove this clinic?\");\n      if (r == true) {\n        for (let i = 0; i < self.payment.items.length; i++) {\n          if (i == index) {\n            self.payment.items.splice(i, 1)\n          }\n        }\n      }\n    },\n    onSaveDraft() {\n      let self = this;\n\n      let params = self.payment;\n      params.id = self.id;\n      params.status = 1; // Draft.\n\n      rf.getRequest(\"AdminRequest\")\n        .postPayments(params)\n        .then((res) => {\n          self.payment = res.data;\n        });\n    },\n    onSend() {\n      let self = this;\n      let params = self.payment;\n      params.id = self.id;\n      params.status = 2; // Publish.\n\n      rf.getRequest(\"AdminRequest\")\n        .postPayments(params)\n        .then((res) => {\n          self.payment = res.data;\n        });\n    },\n  },\n};\n</script>\n\n<style scopde>\n.card-body {\n  padding: 34px 46px 42px 32px;\n}\n</style>\n"]}]}