{"remainingRequest":"/var/www/provider.voycare.com/node_modules/vue-loader/lib/index.js??vue-loader-options!/var/www/provider.voycare.com/src/components/NewsFormEdit.vue?vue&type=script&lang=js&","dependencies":[{"path":"/var/www/provider.voycare.com/src/components/NewsFormEdit.vue","mtime":1597188728160},{"path":"/var/www/provider.voycare.com/node_modules/cache-loader/dist/cjs.js","mtime":1596630677130},{"path":"/var/www/provider.voycare.com/node_modules/thread-loader/dist/cjs.js","mtime":1596630678838},{"path":"/var/www/provider.voycare.com/node_modules/babel-loader/lib/index.js","mtime":1596630688999},{"path":"/var/www/provider.voycare.com/node_modules/cache-loader/dist/cjs.js","mtime":1596630677130},{"path":"/var/www/provider.voycare.com/node_modules/vue-loader/lib/index.js","mtime":1596630687836}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBEYXRlUGlja2VyIGZyb20gJ3Z1ZTItZGF0ZXBpY2tlcicKaW1wb3J0IHJmIGZyb20gIi4uL2FwaS9SZXF1ZXN0RmFjdG9yeSIKCmV4cG9ydCBkZWZhdWx0IHsKICBwcm9wczogWyduZXdzJ10sCiAgY29tcG9uZW50czp7RGF0ZVBpY2tlcn0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHByZXZpZXdJbWFnZVNyYzogbnVsbCwKICAgICAgaXNJbWFnZUhvdmVyZWQ6IGZhbHNlLAogICAgICBuZXdzRGF0YTogbnVsbCwKICAgICAgY2F0ZWdvcmllT3B0aW9uczogbnVsbCwKICAgICAgbmV3Q2F0ZWdvcnk6ICcnCiAgICB9CiAgfSwKICBjb21wdXRlZDp7CiAgICBwdWJsaXNoRGF0ZTp7CiAgICAgIGdldCgpewogICAgICAgIGlmKHRoaXMubmV3c0RhdGEgJiYgdGhpcy5uZXdzRGF0YS5wdWJsaXNoX2RhdGUpewogICAgICAgICAgcmV0dXJuIHRoaXMubmV3c0RhdGEucHVibGlzaF9kYXRlICogMTAwMAogICAgICAgIH0KICAgICAgICByZXR1cm4gRGF0ZS5wYXJzZShuZXcgRGF0ZSgpKQogICAgICB9LAogICAgICBzZXQodmFsdWUpewogICAgICAgIHRoaXMubmV3c0RhdGEucHVibGlzaF9kYXRlID0gdmFsdWUgLyAxMDAwCiAgICAgIH0KICAgIH0sCiAgICBzZWxlY3RlZENhdGVnb3J5TmFtZXMoKXsKICAgICAgaWYodGhpcy5uZXdzRGF0YS5jYXRlZ29yeV9pZHMgJiYgdGhpcy5jYXRlZ29yaWVPcHRpb25zKXsKICAgICAgICByZXR1cm4gdGhpcy5uZXdzRGF0YS5jYXRlZ29yeV9pZHMubWFwKGNhdElkID0+IHsKICAgICAgICAgIHJldHVybiB0aGlzLmNhdGVnb3JpZU9wdGlvbnMuZmluZChpdGVtID0+aXRlbS5pZCA9PT0gY2F0SWQpLm5hbWUKICAgICAgICB9KS5qb2luKCcsICcpCiAgICAgIH0KICAgICAgcmV0dXJuICcnCiAgICB9CiAgfSwKICB3YXRjaDogewogICAgbmV3czp7CiAgICAgIGRlZXA6IHRydWUsCiAgICAgIGltbWVkaWF0ZTogdHJ1ZSwKICAgICAgaGFuZGxlcigpewogICAgICAgIHRoaXMubmV3c0RhdGEgPSB7Li4udGhpcy5uZXdzfQogICAgICAgIHRoaXMubmV3c0RhdGEuY2F0ZWdvcnlfaWRzID0gWzEsMiw0XQogICAgICB9CiAgICB9CiAgfSwKICBjcmVhdGVkKCkgewogICAgdGhpcy5mZXRjaENhdGVnb3JpZXMoKQogIH0sCiAgbWV0aG9kczogewogICAgb25TYXZlKCkgewogICAgICB0aGlzLiRlbWl0KCdvblNhdmUnLCB0aGlzLm5ld3NEYXRhKQogICAgfSwKICAgIGFzeW5jIG9uQWZ0ZXJQaWNrUGhvdG8oZSkgewogICAgICBsZXQgc2VsZiA9IHRoaXMKICAgICAgY29uc3QgZmlsZSA9IGUudGFyZ2V0LmZpbGVzWzBdCiAgICAgIC8vIGNvbnN0IGZvcm1fZGF0YSA9IG5ldyBGb3JtRGF0YSgpCiAgICAgIC8vIGZvcm1fZGF0YS5hcHBlbmQoJ2ltYWdlJywgZmlsZSkKICAgICAgLy8gdGh1bW5haWwgaXMgaW1hZ2UKICAgICAgdGhpcy5wcmV2aWV3SW1hZ2UoZmlsZSkKICAgIH0sCiAgICBwcmV2aWV3SW1hZ2UoaW1hZ2UpewogICAgICBsZXQgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKQogICAgICByZWFkZXIucmVhZEFzRGF0YVVSTChpbWFnZSkKICAgICAgcmVhZGVyLm9ubG9hZCA9IGUgPT4gewogICAgICAgIHRoaXMucHJldmlld0ltYWdlU3JjID0gZS50YXJnZXQucmVzdWx0CiAgICAgIH0KICAgIH0sCiAgICBvblJlbW92ZVBob3RvKCl7CiAgICAgIHRoaXMucHJldmlld0ltYWdlU3JjID0gbnVsbAogICAgfSwKICAgIGNyZWF0ZU5ld0NhdGVnb3J5KCl7CiAgICAgIHJmLmdldFJlcXVlc3QoJ0FkbWluUmVxdWVzdCcpLnBvc3ROZXdzQ2F0ZWdvcmllc0NyZWF0ZSh7bmFtZTogdGhpcy5uZXdDYXRlZ29yeX0pCiAgICAgICAgLnRoZW4oKCkgPT4gewogICAgICAgICAgdGhpcy5mZXRjaENhdGVnb3JpZXMoKQogICAgICAgICAgdGhpcy5uZXdDYXRlZ29yeSA9ICcnCiAgICAgICAgfSkKICAgICAgCiAgICB9LAogICAgZmV0Y2hDYXRlZ29yaWVzKCl7CiAgICAgIHJmLmdldFJlcXVlc3QoJ0FkbWluUmVxdWVzdCcpLmdldE5ld3NDYXRlZ29yaWVzKCkudGhlbigoe2RhdGF9KSA9PiB7CiAgICAgICAgdGhpcy5jYXRlZ29yaWVPcHRpb25zID0gZGF0YQogICAgICB9KQogICAgICAKICAgIH0KICB9Cn0K"},{"version":3,"sources":["NewsFormEdit.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0GA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA","file":"NewsFormEdit.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div>\n    <div class=\"form-group\">\n      <label>Title</label>\n      <input type=\"text\" class=\"form-control\" v-model=\"newsData.title\">\n    </div>\n\n    <div class=\"form-group\" >\n      <label>Main image</label>\n      <input type=\"file\" accept=\"image/*\" capture=\"enviroment\" class=\"form-control\" \n        style=\"height: auto!important;\" @change=\"onAfterPickPhoto\">\n      <div v-if=\"previewImageSrc\" class=\"preview-image-div mb-4\" @mouseenter=\"isImageHovered = true\"\n        @mouseleave=\"isImageHovered = false\">\n        <img id=\"previewImage\" style=\"width: 150px; height: 80px\" :class=\"{'blur':isImageHovered }\"\n           :src=\"previewImageSrc\" />\n        <i class=\"fa fa-trash-o pointer hide-icon\" id=\"removeIcon\" aria-hidden=\"true\" \n          @click=\"onRemovePhoto\" \n          :class=\"{ 'show-icon': isImageHovered }\"></i>\n      </div>\n    </div>\n\n    <div class=\"row\">\n      <div class=\"col-sm-6\">\n        <div class=\"form-group\">\n          <label>Category</label>\n          <b-dropdown class=\"d-block\" :text=\"selectedCategoryNames\" variant=\"outline-secondary\">\n            <b-dropdown-form>\n              <b-form-group @submit.stop.prevent>\n                <b-form-checkbox-group\n                  id=\"checkbox-group-1\"\n                  v-model=\"newsData.category_ids\"\n                  :options=\"categorieOptions\"\n                  value-field=\"id\"\n                  text-field=\"name\"\n                ></b-form-checkbox-group>\n              </b-form-group>\n            </b-dropdown-form>\n            <b-form class=\"my-2 ml-4 form-inline\" @submit.prevent=\"createNewCategory\">\n                <i style=\"margin-bottom: 10px; line-height: 32px;\" class=\"fa fa-plus pointer\" @click=\"createNewCategory\" />\n                <input v-model=\"newCategory\" type=\"text\" class=\"form-control form-control-sm mx-2\" /> \n                <span style=\"margin-bottom: 10px; line-height: 32px;\">Add</span>\n            </b-form>\n\n            <!-- <b-form-group class=\"text-center\">\n              <button class=\"btn btn-sm my-4\" id=\"categorySaveBtn\">Save</button>\n            </b-form-group>  -->\n          </b-dropdown>\n        </div>\n      </div>\n      <div class=\"col-sm-6\">\n        <div class=\"form-group\">\n          <label>Publish Date</label><br/>\n          <date-picker style=\"width: 100%;\" v-model=\"publishDate\" :default-value=\"new Date()\" \n            value-type=\"timestamp\"></date-picker>\n        </div>\n      </div>\n    </div>\n\n    <div class=\"form-group\">\n      <label>Text</label>\n      <textarea v-model=\"newsData.content\" style=\"height: auto!important;\" class=\"form-control\" \n        cols=\"30\" rows=\"5\" ></textarea>\n    </div>\n\n    <div class=\"row\">\n      <div class=\"col-sm-6\">\n        <div class=\"form-group\">\n          <label>Tags\n            <small>(separated with a comma)</small>\n          </label>\n          <input type=\"text\" class=\"form-control\" v-model=\"newsData.tags\">\n        </div>\n      </div>\n      <div class=\"col-sm-6\">\n        <div class=\"form-group\">\n          <label>Source</label>\n          <input type=\"text\" class=\"form-control\" v-model=\"newsData.source\">\n        </div>\n      </div>\n    </div>\n\n    <div class=\"form-group\">\n      <label>Status</label>\n      <div class=\"row\">\n        <div class=\"col-sm-12\">\n          <div class=\"form-check form-check-inline\">\n            <input class=\"form-check-input\" type=\"radio\" v-model=\"newsData.status\" name=\"status\" id=\"status_publish\"\n                   value=\"1\">\n            <label class=\"form-check-label\" for=\"status_publish\">Publish</label>\n          </div>\n          <div class=\"form-check form-check-inline\">\n            <input class=\"form-check-input\" type=\"radio\" v-model=\"newsData.status\" name=\"status\" id=\"status_draft\"\n                   value=\"0\">\n            <label class=\"form-check-label\" for=\"status_draft\">Draft</label>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <div class=\"form-group mt-5 mb-4 text-center\">\n      <button class=\"btn btn-save\" @click=\"onSave\">Save</button>\n    </div>\n  </div>\n</template>\n\n<script>\n  import DatePicker from 'vue2-datepicker'\n  import rf from \"../api/RequestFactory\"\n\n  export default {\n    props: ['news'],\n    components:{DatePicker},\n    data() {\n      return {\n        previewImageSrc: null,\n        isImageHovered: false,\n        newsData: null,\n        categorieOptions: null,\n        newCategory: ''\n      }\n    },\n    computed:{\n      publishDate:{\n        get(){\n          if(this.newsData && this.newsData.publish_date){\n            return this.newsData.publish_date * 1000\n          }\n          return Date.parse(new Date())\n        },\n        set(value){\n          this.newsData.publish_date = value / 1000\n        }\n      },\n      selectedCategoryNames(){\n        if(this.newsData.category_ids && this.categorieOptions){\n          return this.newsData.category_ids.map(catId => {\n            return this.categorieOptions.find(item =>item.id === catId).name\n          }).join(', ')\n        }\n        return ''\n      }\n    },\n    watch: {\n      news:{\n        deep: true,\n        immediate: true,\n        handler(){\n          this.newsData = {...this.news}\n          this.newsData.category_ids = [1,2,4]\n        }\n      }\n    },\n    created() {\n      this.fetchCategories()\n    },\n    methods: {\n      onSave() {\n        this.$emit('onSave', this.newsData)\n      },\n      async onAfterPickPhoto(e) {\n        let self = this\n        const file = e.target.files[0]\n        // const form_data = new FormData()\n        // form_data.append('image', file)\n        // thumnail is image\n        this.previewImage(file)\n      },\n      previewImage(image){\n        let reader = new FileReader()\n        reader.readAsDataURL(image)\n        reader.onload = e => {\n          this.previewImageSrc = e.target.result\n        }\n      },\n      onRemovePhoto(){\n        this.previewImageSrc = null\n      },\n      createNewCategory(){\n        rf.getRequest('AdminRequest').postNewsCategoriesCreate({name: this.newCategory})\n          .then(() => {\n            this.fetchCategories()\n            this.newCategory = ''\n          })\n        \n      },\n      fetchCategories(){\n        rf.getRequest('AdminRequest').getNewsCategories().then(({data}) => {\n          this.categorieOptions = data\n        })\n        \n      }\n    }\n  }\n</script>\n<style scoped>\n\n.preview-image-div{\n  width: fit-content;\n  height: fit-content;\n  position: relative;\n}\n.blur{\n  opacity: 0.2;\n}\n#removeIcon{\n  font-size: 20px;\n  color: #EB6271;\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  margin: auto;\n  width: 20px;\n  height: 20px;\n  visibility: hidden;\n}\n/* date picker style in ClinicAvailableDetail */\n#categorySaveBtn{\n  width: 80px; \n  background: #EB6271; \n  border-radius: 100px;\n  border-color: #EB6271;\n  color: white;\n}  \n</style>\n"]}]}