{"remainingRequest":"/var/www/provider-stg.hera.health/node_modules/vue-loader/lib/index.js??vue-loader-options!/var/www/provider-stg.hera.health/src/views/admin/AdminClientPaymentEdit.vue?vue&type=script&lang=js&","dependencies":[{"path":"/var/www/provider-stg.hera.health/src/views/admin/AdminClientPaymentEdit.vue","mtime":1595075680416},{"path":"/var/www/provider-stg.hera.health/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/var/www/provider-stg.hera.health/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/var/www/provider-stg.hera.health/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCByZiBmcm9tICIuLi8uLi9hcGkvUmVxdWVzdEZhY3RvcnkiOwoKZXhwb3J0IGRlZmF1bHQgewogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBpZDogbnVsbCwKICAgICAgcGF5bWVudF9tZXRob2RzOiBbXSwKICAgICAgcGF5bWVudDogewogICAgICAgIGlkOiBudWxsLAogICAgICAgIG5hbWU6ICcnLAogICAgICAgIGVtYWlsOiAnJywKICAgICAgICBjcmVhdGVkX2F0OiBudWxsLAogICAgICAgIHBheW1lbnRfdHlwZTogJycsCiAgICAgICAgdHJhbnNhY3Rpb25faWQ6ICcnLAogICAgICAgIGl0ZW1zOiBbXQogICAgICB9CiAgICB9CiAgfSwKICBtb3VudGVkKCkgewogICAgbGV0IHNlbGYgPSB0aGlzCgogICAgc2VsZi5pZCA9IHNlbGYuJHJvdXRlLnBhcmFtcy5pZAogICAgaWYgKHNlbGYuaWQpIHsKICAgICAgc2VsZi5nZXREZXRhaWwoKQogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgZ2V0VG90YWwoKSB7CiAgICAgIGxldCBzZWxmID0gdGhpcwoKICAgICAgbGV0IHRvdGFsID0gMAogICAgICBzZWxmLnBheW1lbnQuaXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4gewogICAgICAgIHRvdGFsICs9IGl0ZW0udG90YWwKICAgICAgfSkKCiAgICAgIHJldHVybiB0b3RhbAogICAgfSwKICAgIGdldERldGFpbCgpIHsKICAgICAgbGV0IHNlbGYgPSB0aGlzCgogICAgICByZi5nZXRSZXF1ZXN0KCdBZG1pblJlcXVlc3QnKS5nZXRQYXltZW50RGV0YWlsKHNlbGYuaWQpLnRoZW4ocmVzID0+IHsKICAgICAgICBzZWxmLnBheW1lbnQgPSByZXMuZGF0YQogICAgICB9KQogICAgfSwKICAgIG9uQWRkSXRlbSgpIHsKICAgICAgbGV0IHNlbGYgPSB0aGlzCgogICAgICBzZWxmLnBheW1lbnQuaXRlbXMucHVzaCh7CiAgICAgICAgaWQ6IG51bGwsCiAgICAgICAgaXRlbV9kYXRlOiBuZXcgRGF0ZSgpLAogICAgICAgIGl0ZW1fbmFtZTogJycsCiAgICAgICAgYXBwb2ludG1lbnRfbm86ICcnLAogICAgICAgIGFtb3VudDogMAogICAgICB9KQogICAgfSwKICAgIG9uUmVtb3ZlSXRlbShpdGVtX2lkLCBpbmRleCkgewogICAgICBsZXQgc2VsZiA9IHRoaXMKCiAgICAgIHZhciByID0gY29uZmlybSgiQXJlIHlvdSB3YW50IHRvIHJlbW92ZSB0aGlzIGNsaW5pYz8iKTsKICAgICAgaWYgKHIgPT0gdHJ1ZSkgewogICAgICAgIGlmIChzZWxmLmlkKSB7CiAgICAgICAgICByZi5nZXRSZXF1ZXN0KCdBZG1pblJlcXVlc3QnKS5wb3N0UmVtb3ZlUGF5bWVudEl0ZW0oc2VsZi5pZCwge2l0ZW1faWR9KS50aGVuKHJlcyA9PiB7CiAgICAgICAgICAgIHNlbGYucGF5bWVudCA9IHJlcy5kYXRhCiAgICAgICAgICB9KQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNlbGYucGF5bWVudC5pdGVtcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICBpZiAoaSA9PSBpbmRleCkgewogICAgICAgICAgICAgIGRlbGV0ZSBzZWxmLnBheW1lbnQuaXRlbXNbaV0KICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIG9uU2F2ZURyYWZ0KCkgewogICAgICBsZXQgc2VsZiA9IHRoaXMKCiAgICAgIGxldCBwYXJhbXMgPSBzZWxmLnBheW1lbnQKICAgICAgcGFyYW1zLmlkID0gc2VsZi5pZAogICAgICBwYXJhbXMuc3RhdHVzID0gMSAvLyBEcmFmdC4KCiAgICAgIHJmLmdldFJlcXVlc3QoJ0FkbWluUmVxdWVzdCcpLnBvc3RQYXltZW50cyhwYXJhbXMpLnRoZW4ocmVzID0+IHsKICAgICAgICBzZWxmLnBheW1lbnQgPSByZXMuZGF0YQogICAgICB9KQogICAgfSwKICAgIG9uU2VuZCgpIHsKICAgICAgbGV0IHNlbGYgPSB0aGlzCiAgICAgIGxldCBwYXJhbXMgPSBzZWxmLnBheW1lbnQKICAgICAgcGFyYW1zLmlkID0gc2VsZi5pZAogICAgICBwYXJhbXMuc3RhdHVzID0gMiAvLyBQdWJsaXNoLgoKICAgICAgcmYuZ2V0UmVxdWVzdCgnQWRtaW5SZXF1ZXN0JykucG9zdFBheW1lbnRzKHBhcmFtcykudGhlbihyZXMgPT4gewogICAgICAgIHNlbGYucGF5bWVudCA9IHJlcy5kYXRhCiAgICAgIH0pCiAgICB9CiAgfQp9Cg=="},{"version":3,"sources":["AdminClientPaymentEdit.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsHA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"AdminClientPaymentEdit.vue","sourceRoot":"src/views/admin","sourcesContent":["<template>\n  <div class=\"content\" v-if=\"payment\">\n    <div class=\"row mb-3\">\n      <div class=\"col-sm-6\">\n        <router-link\n            to=\"/payments\"\n        >\n          <img src=\"/assets/img/icon_back.png\"> <span class=\"back\">Back to Client Invoice</span>\n        </router-link>\n      </div>\n      <div class=\"col-sm-6 text-right\">\n        <div class=\"form-inline\">\n          <div class=\"form-group mb-2\">\n            <label>Invoice NO.</label>\n            <input type=\"text\" class=\"form-control\" v-model=\"payment.id\">\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <div class=\"row mb-3\">\n      <div class=\"col-sm-3\">\n        <label>Hera ID</label>\n        <input type=\"text\" class=\"form-control\" v-model=\"payment.id\">\n      </div>\n      <div class=\"col-sm-3\">\n        <label>Name</label>\n        <input type=\"text\" class=\"form-control\" v-model=\"payment.name\">\n      </div>\n      <div class=\"col-sm-3\">\n        <label>Email</label>\n        <input type=\"email\" class=\"form-control\" v-model=\"payment.email\">\n      </div>\n      <div class=\"col-sm-3\">\n        <label>Order Date</label>\n        <input type=\"text\" class=\"form-control\" v-model=\"payment.created_at\">\n      </div>\n    </div>\n\n    <div class=\"row mb-3\">\n      <div class=\"col-sm-3\">\n        <label>Total Paid</label>\n        <input type=\"text\" class=\"form-control\" v-model=\"payment.total\">\n      </div>\n      <div class=\"col-sm-3\">\n        <label>Payment Method</label>\n        <select class=\"form-control\" v-model=\"payment.payment_type\">\n          <option :value=\"id\" v-for=\"(payment_method, id) in payment_methods\" :key=\"id\">{{ payment_method }}</option>\n        </select>\n      </div>\n      <div class=\"col-sm-3\">\n        <label>Payment Transaction ID</label>\n        <input type=\"text\" class=\"form-control\" v-model=\"payment.transaction_id\">\n      </div>\n    </div>\n\n    <div class=\"card\">\n      <div class=\"card-body\">\n        <table class=\"table\">\n          <thead>\n          <tr>\n            <th>#</th>\n            <th>Item</th>\n            <th>Clinic</th>\n            <th>Price</th>\n            <th>Qty</th>\n            <th>Total</th>\n            <th></th>\n          </tr>\n          </thead>\n          <tbody>\n          <tr v-for=\"(item, index) in payment.items\" :key=\"item.id\">\n            <td>{{ item.id }}</td>\n            <td>\n              <input type=\"text\" class=\"form-control\" v-model=\"item.name\">\n            </td>\n            <td>\n              <input type=\"text\" class=\"form-control\" v-model=\"item.clinic_id\">\n            </td>\n            <td>\n              <input type=\"text\" class=\"form-control\" v-model=\"item.price\">\n            </td>\n            <td>\n              <input type=\"text\" class=\"form-control\" v-model=\"item.quantity\">\n            </td>\n            <td>\n              <input type=\"text\" class=\"form-control\" v-model=\"item.total\">\n            </td>\n            <td>\n              <button class=\"btn btn-link\" @click=\"onRemoveItem(item.id, index)\"><i class=\"fa fa-trash\"></i></button>\n            </td>\n          </tr>\n          <tr>\n            <td colspan=\"5\" class=\"text-right\"><strong>Total Paid</strong></td>\n            <td>\n              <input type=\"text\" class=\"form-control\" readonly :value=\"getTotal()\">\n            </td>\n            <td>\n              <button class=\"btn btn-link\" @click=\"onAddItem\"><i class=\"fa fa-plus\"></i></button>\n            </td>\n          </tr>\n          </tbody>\n        </table>\n      </div>\n    </div>\n\n    <div class=\"row\">\n      <div class=\"col-sm-6\">\n        <button class=\"btn btn-success\" @click=\"onSend\">Send</button>\n      </div>\n      <div class=\"col-sm-6\">\n        <button class=\"btn btn-dark\" @click=\"onSaveDraft\">Save as Draft</button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\n  import rf from \"../../api/RequestFactory\";\n\n  export default {\n    data() {\n      return {\n        id: null,\n        payment_methods: [],\n        payment: {\n          id: null,\n          name: '',\n          email: '',\n          created_at: null,\n          payment_type: '',\n          transaction_id: '',\n          items: []\n        }\n      }\n    },\n    mounted() {\n      let self = this\n\n      self.id = self.$route.params.id\n      if (self.id) {\n        self.getDetail()\n      }\n    },\n    methods: {\n      getTotal() {\n        let self = this\n\n        let total = 0\n        self.payment.items.forEach((item) => {\n          total += item.total\n        })\n\n        return total\n      },\n      getDetail() {\n        let self = this\n\n        rf.getRequest('AdminRequest').getPaymentDetail(self.id).then(res => {\n          self.payment = res.data\n        })\n      },\n      onAddItem() {\n        let self = this\n\n        self.payment.items.push({\n          id: null,\n          item_date: new Date(),\n          item_name: '',\n          appointment_no: '',\n          amount: 0\n        })\n      },\n      onRemoveItem(item_id, index) {\n        let self = this\n\n        var r = confirm(\"Are you want to remove this clinic?\");\n        if (r == true) {\n          if (self.id) {\n            rf.getRequest('AdminRequest').postRemovePaymentItem(self.id, {item_id}).then(res => {\n              self.payment = res.data\n            })\n          } else {\n            for (let i = 0; i < self.payment.items.length; i++) {\n              if (i == index) {\n                delete self.payment.items[i]\n              }\n            }\n          }\n        }\n      },\n      onSaveDraft() {\n        let self = this\n\n        let params = self.payment\n        params.id = self.id\n        params.status = 1 // Draft.\n\n        rf.getRequest('AdminRequest').postPayments(params).then(res => {\n          self.payment = res.data\n        })\n      },\n      onSend() {\n        let self = this\n        let params = self.payment\n        params.id = self.id\n        params.status = 2 // Publish.\n\n        rf.getRequest('AdminRequest').postPayments(params).then(res => {\n          self.payment = res.data\n        })\n      }\n    }\n  }\n</script>\n\n<style></style>\n"]}]}