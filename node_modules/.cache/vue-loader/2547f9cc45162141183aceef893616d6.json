{"remainingRequest":"/var/www/provider-stg.hera.health/node_modules/vue-loader/lib/index.js??vue-loader-options!/var/www/provider-stg.hera.health/src/layouts/ForgetPasswordLayout.vue?vue&type=script&lang=js&","dependencies":[{"path":"/var/www/provider-stg.hera.health/src/layouts/ForgetPasswordLayout.vue","mtime":1590709568406},{"path":"/var/www/provider-stg.hera.health/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/var/www/provider-stg.hera.health/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/var/www/provider-stg.hera.health/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBBUEkgZnJvbSAiLi4vdXRpbHMvYXBpIjsKLy8gaW1wb3J0IFVUSUxTIGZyb20gIi4uL3V0aWxzL3V0aWxzIjsKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiZm9yZ2V0cGFzc3dvcmRMYXlvdXQiLAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBpbnB1dDogewogICAgICAgIGVtYWlsOiAiIgogICAgICB9LAogICAgICBlcnJvcjogewogICAgICAgIGVtYWlsOiAiIgogICAgICB9CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICB2YWxpZGF0ZUlucHV0OiBmdW5jdGlvbiAoKSB7CiAgICAgIGxldCByZXN1bHQgPSB0cnVlOwogICAgICBpZiAoIXRoaXMuaW5wdXQuZW1haWwpIHsKICAgICAgICB0aGlzLmVycm9yLmVtYWlsID0gImVtYWlsIGNhbm5vdCBiZSBlbXB0eSI7CiAgICAgICAgcmVzdWx0ID0gZmFsc2U7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5lcnJvci5lbWFpbCA9ICIiOwogICAgICB9CiAgICAgIGlmICh0aGlzLmlucHV0LmVtYWlsICYmICEvXFMrQFxTK1wuXFMrLy50ZXN0KHRoaXMuaW5wdXQuZW1haWwpKSB7CiAgICAgICAgdGhpcy5lcnJvci5lbWFpbCA9ICJlbWFpbCBpbnZhbGlkIjsKICAgICAgICByZXN1bHQgPSBmYWxzZTsKICAgICAgfQogICAgICByZXR1cm4gcmVzdWx0OwogICAgfSwKICAgIHJlcXVlc3RSZXN0b3JlUGFzc3dvcmQoKSB7CiAgICAgIGxldCBzZWxmID0gdGhpcwogICAgICBpZiAoIXRoaXMudmFsaWRhdGVJbnB1dCgpKSB7CiAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgIH0KICAgICAgZmV0Y2goQVBJLmdldEFwaShBUEkuQVVUSC5GT1JHRVRfUEFTU1dPUkQpLCB7CiAgICAgICAgbWV0aG9kOiAncG9zdCcsCiAgICAgICAgaGVhZGVyczogewogICAgICAgICAgJ0FjY2VwdCc6ICdhcHBsaWNhdGlvbi9qc29uJywKICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicKICAgICAgICB9LAogICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsKICAgICAgICAgICJlbWFpbCI6IHRoaXMuaW5wdXQuZW1haWwsCiAgICAgICAgfSkKICAgICAgfSkudGhlbihyZXMgPT4gcmVzLmpzb24oKSkudGhlbihyZXMgPT4gewogICAgICAgIHN3aXRjaCAocmVzLnN0YXR1cykgewogICAgICAgICAgY2FzZSAyMDA6IHsKICAgICAgICAgICAgYWxlcnQoInBsZWFzZSBjaGVjayB5b3VyIG1haWwgYm94IHRvIHJlc2V0IHBhc3N3b3JkIik7CiAgICAgICAgICAgIHNlbGYuJHJvdXRlci5wdXNoKHtwYXRoOiAnL2xvZ2luJ30pCiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0KICAgICAgICAgIGNhc2UgNDA0OiB7CiAgICAgICAgICAgIHRoaXMuZXJyb3IuZW1haWwgPSAiYWNjb3VudCBub3QgZm91bmQgZm9yIGVtYWlsICIgKyB0aGlzLmlucHV0LmVtYWlsOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9CiAgICAgICAgICBkZWZhdWx0OiB7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0pLmNhdGNoKGUgPT4gewogICAgICAgIGNvbnNvbGUubG9nKGUpCiAgICAgIH0pOwogICAgfQogIH0KfQo="},{"version":3,"sources":["ForgetPasswordLayout.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6BA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ForgetPasswordLayout.vue","sourceRoot":"src/layouts","sourcesContent":["<template>\n    <div class=\"main-wrapper account-wrapper\">\n        <div class=\"account-page\">\n            <div class=\"account-center\">\n                <div class=\"account-box\">\n                    <form method=\"post\" class=\"form-signin\">\n                        <div class=\"account-logo\">\n                            <a href=\"index.html\"><img src=\"/assets/img/Hera_LOGO.png\" alt=\"\"></a>\n                        </div>\n                        <div class=\"form-group\">\n                            <label>Email</label>\n                            <small class=\"text-danger text-sm-left\" style=\"display: block\">{{error.email}}</small>\n                            <input v-model=\"input.email\" required type=\"text\" autofocus=\"\" class=\"form-control\">\n                        </div>\n\n\n                        <div class=\"form-group text-center\">\n                            <button type=\"submit\" @click.prevent=\"requestRestorePassword\"\n                                    class=\"btn btn-primary account-btn\">Restore Password\n                            </button>\n                        </div>\n                    </form>\n                </div>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\n  import API from \"../utils/api\";\n  // import UTILS from \"../utils/utils\";\n\n  export default {\n    name: \"forgetpasswordLayout\",\n    data() {\n      return {\n        input: {\n          email: \"\"\n        },\n        error: {\n          email: \"\"\n        }\n      }\n    },\n    methods: {\n      validateInput: function () {\n        let result = true;\n        if (!this.input.email) {\n          this.error.email = \"email cannot be empty\";\n          result = false;\n        } else {\n          this.error.email = \"\";\n        }\n        if (this.input.email && !/\\S+@\\S+\\.\\S+/.test(this.input.email)) {\n          this.error.email = \"email invalid\";\n          result = false;\n        }\n        return result;\n      },\n      requestRestorePassword() {\n        let self = this\n        if (!this.validateInput()) {\n          return null;\n        }\n        fetch(API.getApi(API.AUTH.FORGET_PASSWORD), {\n          method: 'post',\n          headers: {\n            'Accept': 'application/json',\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify({\n            \"email\": this.input.email,\n          })\n        }).then(res => res.json()).then(res => {\n          switch (res.status) {\n            case 200: {\n              alert(\"please check your mail box to reset password\");\n              self.$router.push({path: '/login'})\n              return;\n            }\n            case 404: {\n              this.error.email = \"account not found for email \" + this.input.email;\n              return;\n            }\n            default: {\n              return;\n            }\n          }\n        }).catch(e => {\n          console.log(e)\n        });\n      }\n    }\n  }\n</script>\n\n<style scoped>\n\n</style>"]}]}