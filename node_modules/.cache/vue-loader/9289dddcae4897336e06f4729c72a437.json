{"remainingRequest":"/var/www/provider.voycare.com/node_modules/vue-loader/lib/index.js??vue-loader-options!/var/www/provider.voycare.com/src/views/admin/AppointmentCRDetail.vue?vue&type=script&lang=js&","dependencies":[{"path":"/var/www/provider.voycare.com/src/views/admin/AppointmentCRDetail.vue","mtime":1597939243771},{"path":"/var/www/provider.voycare.com/node_modules/cache-loader/dist/cjs.js","mtime":1596630677130},{"path":"/var/www/provider.voycare.com/node_modules/thread-loader/dist/cjs.js","mtime":1596630678838},{"path":"/var/www/provider.voycare.com/node_modules/babel-loader/lib/index.js","mtime":1596630688999},{"path":"/var/www/provider.voycare.com/node_modules/cache-loader/dist/cjs.js","mtime":1596630677130},{"path":"/var/www/provider.voycare.com/node_modules/vue-loader/lib/index.js","mtime":1596630687836}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCByZiBmcm9tICIuLi8uLi9hcGkvUmVxdWVzdEZhY3RvcnkiOwppbXBvcnQgQ29uc3QgZnJvbSAiLi8uLi8uLi91dGlscy9jb25zdCIKaW1wb3J0IEJhY2tUbyBmcm9tICcuLi8uLi9jb21wb25lbnRzL0JhY2tUbycKCmV4cG9ydCBkZWZhdWx0IHsKICBjb21wb25lbnRzOiB7QmFja1RvfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgQ29uc3QsCiAgICAgIGFwcHRfY3I6IG51bGwsCiAgICAgIGlkOiBudWxsLAogICAgICBpc19lZGl0OiBmYWxzZSwKICAgICAgaXNfZWRpdF9ub3RlOiBmYWxzZSwKICAgICAgcGF5bWVudF9tZXRob2RzOiBbCiAgICAgICAge2lkOiAxLCBuYW1lOiAnQWxpcGF5J30KICAgICAgXSwKICAgICAgc3RhdHVzX2lkczogWwogICAgICAgIHtpZDogMSwgbmFtZTogJ1Byb2Nlc3NpbmcnfSwKICAgICAgICB7aWQ6IDIsIG5hbWU6ICdSZWZ1bmRlZCd9LAogICAgICBdLAogICAgICB3aHlfY2FuY2VsczogWwogICAgICAgIHtpZDogMCwgbmFtZTogJyAtICd9LAogICAgICAgIHtpZDogMSwgbmFtZTogJ1RpbWUgY29uZmxpY3QnfSwKICAgICAgICB7aWQ6IDIsIG5hbWU6ICdUb28gZXhwZW5zaXZlJ30sCiAgICAgICAge2lkOiAzLCBuYW1lOiAnRW1lcmdlbmN5J30sCiAgICAgICAge2lkOiA0LCBuYW1lOiAiRG9uJ3QgbmVlZCBzZXJ2aWNlIn0sCiAgICAgICAge2lkOiA1LCBuYW1lOiAnT3RoZXInfSwKICAgICAgXQogICAgfQogIH0sCiAgbW91bnRlZCgpIHsKICAgIGxldCBzZWxmID0gdGhpcwogICAgc2VsZi5pZCA9IHBhcnNlSW50KHRoaXMuJHJvdXRlLnBhcmFtcy5pZCkKCiAgICBzZWxmLmdldERldGFpbCgpCiAgfSwKICBtZXRob2RzOiB7CiAgICBnZXREZXRhaWwoKSB7CiAgICAgIGxldCBzZWxmID0gdGhpcwoKICAgICAgcmYuZ2V0UmVxdWVzdCgnQWRtaW5SZXF1ZXN0JykuZ2V0QXBwb2ludG1lbnRzQ1JEZXRhaWwoc2VsZi5pZCkudGhlbigocmVzKSA9PiB7CiAgICAgICAgc2VsZi5hcHB0X2NyID0gcmVzLmRhdGEKICAgICAgfSk7CiAgICB9LAogICAgb25TYXZlKCkgewogICAgICBsZXQgc2VsZiA9IHRoaXMKICAgICAgbGV0IHBhcmFtcyA9IHsKICAgICAgICBhZG1pbl9ub3RlOiBzZWxmLmFwcHRfY3IuYWRtaW5fbm90ZQogICAgICB9CgogICAgICByZi5nZXRSZXF1ZXN0KCdBZG1pblJlcXVlc3QnKS5wb3N0QXBwb2ludG1lbnRzQ1JEZXRhaWwoc2VsZi5pZCwgcGFyYW1zKS50aGVuKHJlcyA9PiB7CiAgICAgICAgc2VsZi5hcHB0X2NyID0gcmVzLmRhdGEKICAgICAgfSkKICAgIH0sCiAgICBvblNhdmVTdGF0dXMoKSB7CiAgICAgIGxldCBzZWxmID0gdGhpcwoKICAgICAgbGV0IHBhcmFtcyA9IHsKICAgICAgICBzdGF0dXM6IHNlbGYuYXBwdF9jci5zdGF0dXMsCiAgICAgICAgY2l0Y29uX25vOiBzZWxmLmFwcHRfY3IuY2l0Y29uX25vCiAgICAgIH0KCiAgICAgIHJmLmdldFJlcXVlc3QoJ0FkbWluUmVxdWVzdCcpLnBvc3RBcHBvaW50bWVudHNDUkRldGFpbFJlZnVuZChzZWxmLmlkLCBwYXJhbXMpLnRoZW4ocmVzID0+IHsKICAgICAgICBzZWxmLmFwcHRfY3IgPSByZXMuZGF0YQogICAgICB9KQogICAgfQogIH0KfQo="},{"version":3,"sources":["AppointmentCRDetail.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuIA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"AppointmentCRDetail.vue","sourceRoot":"src/views/admin","sourcesContent":["<template>\n  <div>\n    <div class=\"row\">\n      <div class=\"col-sm-12 mb-4\">\n        <BackTo :to=\"'/appointment-cr'\" :text=\"'Back to Cancellation Requests'\" />\n      </div>\n    </div>\n    <div class=\"row\">\n      <div class=\"col-md-9\">\n        <div class=\"card\">\n          <div class=\"card-body appt--wrapper\" v-if=\"appt_cr\">\n            <div class=\"row appt--row\">\n              <div class=\"col-md-6\">\n                <div class=\"appt--item\">\n                  <label class=\"appt--label\">Appt.No: </label>\n                  <div class=\"appt--value\">{{ appt_cr.id | convertAppointmentID }}</div>\n                </div>\n\n                <div class=\"appt--item text-red\">\n                  <label class=\"appt--label\">Cancellation Date: </label>\n                  <div class=\"appt--value\">{{ appt_cr.appointment.created | convertTimeSecondToDate }}</div>\n                </div>\n              </div>\n              <div class=\"col-md-6\">\n                <div class=\"appt--item\">\n                  <label class=\"appt--label\">Status: </label>\n                  <div class=\"appt--value\">\n                    <div class=\"appt--status text-danger\" v-if=\"appt_cr.appointment.status == 2 && appt_cr.status == 1\">\n                      Processing\n                    </div>\n                    <div class=\"appt--status text-success\"\n                         v-if=\"appt_cr.appointment.status == 2 && appt_cr.status == 2\">\n                      Refunded\n                    </div>\n                  </div>\n                </div>\n\n                <div class=\"appt--item text-red\">\n                  <label class=\"appt--label\">Cancellation No: </label>\n                  <div class=\"appt--value\">{{ appt_cr.id }}</div>\n                </div>\n              </div>\n            </div>\n\n            <div class=\"row appt--row\">\n              <div class=\"col-md-6\">\n                <div class=\"appt--item\">\n                  <label class=\"appt--label\">Document Translation: </label>\n                  <div class=\"appt--value\">{{ appt_cr.appointment.documents_count ? 'Yes' : 'No' }}</div>\n                </div>\n              </div>\n\n              <div class=\"col--md-6\">\n                <div class=\"appt--item\">\n                  <label class=\"appt--label\">Fees Collected: </label>\n                  <div class=\"appt--value\">$ {{ appt_cr.fee }}</div>\n                </div>\n              </div>\n            </div>\n\n            <div class=\"row appt--row\">\n              <div class=\"col-md-12\">\n                <div class=\"appt--item\">\n                  <label class=\"appt--label\">Reason for cancellation: </label>\n                  <div class=\"appt--value\">{{ why_cancels.find(why => why.id == appt_cr.why_cancel).name }}</div>\n                </div>\n\n                <div class=\"appt--item\">\n                  <label class=\"appt--label\">Rescheduling offered: </label>\n                  <div class=\"appt--value\">{{ appt_cr.use_again ? 'Yes' : 'No' }}</div>\n                </div>\n              </div>\n            </div>\n\n            <div class=\"row appt--row\">\n              <div class=\"col-md-12\">\n                <div class=\"appt--item\">\n                  <label class=\"appt--label\">Payment Method: </label>\n                  <div class=\"appt--value\">{{ payment_methods.find(method => method.id == appt_cr.use_again).name }}</div>\n                </div>\n\n                <div class=\"appt--item\">\n                  <label class=\"appt--label\">Refund Status: </label>\n                  <div class=\"appt--value\">\n                    <div v-if=\"is_edit\" class=\"card\">\n                      <div class=\"card-body form--pink\">\n                        <div class=\"form-group mb-4\">\n                          <label>Select Refund Status:</label>\n                          <select class=\"form-control\" v-model=\"appt_cr.status\">\n                            <option value=\"1\">Processing</option>\n                            <option value=\"2\">Refunded</option>\n                          </select>\n                        </div>\n                        <div class=\"form-group mb-4\">\n                          <label>CITCON refund confirmation No</label>\n                          <input type=\"text\" class=\"form-control\" v-model=\"appt_cr.citcon_no\">\n                        </div>\n                        <div class=\"form-group text-center\">\n                          <button class=\"btn btn-pink btn-round px-4\" @click=\"onSaveStatus\">Save</button>\n                        </div>\n                      </div>\n                    </div>\n                    <span>{{ status_ids.find(status => status.id == appt_cr.status).name }}</span>\n                    <button @click=\"is_edit = ! is_edit\" class=\"btn btn-link btn-edit\"><i\n                        class=\"fa fa-pencil\"></i> Edit\n                    </button>\n                  </div>\n                </div>\n              </div>\n            </div>\n\n            <div class=\"row appt--row no-border\">\n              <div class=\"col-md-12\">\n                <label style=\"color: #020644;\" class=\"font-weight-500 font-15\">Admin Note</label>\n                <textarea v-if=\"is_edit_note\" name=\"\" id=\"\" cols=\"30\" rows=\"5\" class=\"form-control\" v-model=\"appt_cr.admin_note\"></textarea>\n                <p v-else>{{ appt_cr.admin_note }}</p>\n                <button @click=\"is_edit_note = ! is_edit_note\" class=\"btn btn-link btn-edit\"><i\n                    class=\"fa fa-pencil\"></i> Edit\n                </button>\n              </div>\n            </div>\n\n            <div class=\"row\">\n              <div class=\"col-md-12 text-center\">\n                <button class=\"btn btn-pink btn-round px-4\" click=\"onSave\">Save</button>\n              </div>\n            </div>\n\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n<script>\n  import rf from \"../../api/RequestFactory\";\n  import Const from \"./../../utils/const\"\n  import BackTo from '../../components/BackTo'\n\n  export default {\n    components: {BackTo},\n    data() {\n      return {\n        Const,\n        appt_cr: null,\n        id: null,\n        is_edit: false,\n        is_edit_note: false,\n        payment_methods: [\n          {id: 1, name: 'Alipay'}\n        ],\n        status_ids: [\n          {id: 1, name: 'Processing'},\n          {id: 2, name: 'Refunded'},\n        ],\n        why_cancels: [\n          {id: 0, name: ' - '},\n          {id: 1, name: 'Time conflict'},\n          {id: 2, name: 'Too expensive'},\n          {id: 3, name: 'Emergency'},\n          {id: 4, name: \"Don't need service\"},\n          {id: 5, name: 'Other'},\n        ]\n      }\n    },\n    mounted() {\n      let self = this\n      self.id = parseInt(this.$route.params.id)\n\n      self.getDetail()\n    },\n    methods: {\n      getDetail() {\n        let self = this\n\n        rf.getRequest('AdminRequest').getAppointmentsCRDetail(self.id).then((res) => {\n          self.appt_cr = res.data\n        });\n      },\n      onSave() {\n        let self = this\n        let params = {\n          admin_note: self.appt_cr.admin_note\n        }\n\n        rf.getRequest('AdminRequest').postAppointmentsCRDetail(self.id, params).then(res => {\n          self.appt_cr = res.data\n        })\n      },\n      onSaveStatus() {\n        let self = this\n\n        let params = {\n          status: self.appt_cr.status,\n          citcon_no: self.appt_cr.citcon_no\n        }\n\n        rf.getRequest('AdminRequest').postAppointmentsCRDetailRefund(self.id, params).then(res => {\n          self.appt_cr = res.data\n        })\n      }\n    }\n  }\n</script>\n<style>\n  .appt--row {\n    border-bottom: 1px solid #CBCBCB;\n    margin-bottom: 20px;\n  }\n\n  .appt--wrapper {\n    padding: 42px;\n    color: #020644;\n  }\n\n  .appt--label {\n    font-style: normal;\n    font-weight: 500;\n    font-size: 15px;\n    line-height: 22px;\n    margin-right: 40px;\n  }\n\n  .appt--value {\n    display: inline-block;\n    font-style: normal;\n    font-weight: 500;\n    font-size: 15px;\n    line-height: 22px;\n  }\n\n  .appt--item {\n    margin-bottom: 20px;\n  }\n\n  .form--pink {\n    background-color: #FDD3D1\n  }\n</style>\n"]}]}