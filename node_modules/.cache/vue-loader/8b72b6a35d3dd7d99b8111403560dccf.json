{"remainingRequest":"/var/www/provider.voycare.com/node_modules/vue-loader/lib/index.js??vue-loader-options!/var/www/provider.voycare.com/src/components/AvailableListing.vue?vue&type=style&index=0&id=b8e6fb30&scoped=true&lang=css&","dependencies":[{"path":"/var/www/provider.voycare.com/src/components/AvailableListing.vue","mtime":1597188728159},{"path":"/var/www/provider.voycare.com/node_modules/css-loader/dist/cjs.js","mtime":1596630687928},{"path":"/var/www/provider.voycare.com/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1596630687835},{"path":"/var/www/provider.voycare.com/node_modules/postcss-loader/src/index.js","mtime":1596630674284},{"path":"/var/www/provider.voycare.com/node_modules/cache-loader/dist/cjs.js","mtime":1596630677130},{"path":"/var/www/provider.voycare.com/node_modules/vue-loader/lib/index.js","mtime":1596630687836}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKLmF2YWlsYWJsZS0td3JhcHBlciB7CiAgYmFja2dyb3VuZC1jb2xvcjogIzAyMDY0NDsKICBwYWRkaW5nOiAxNXB4Owp9CgouYXZhaWxhYmxlLS1pdGVtIHsKICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7CiAgd2lkdGg6IDEzOHB4OwogIGhlaWdodDogNzVweDsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmOwogIHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7CiAgdGV4dC1hbGlnbjogY2VudGVyOwogIG1hcmdpbjogMTBweDsKfQoKLmF2YWlsYWJsZS0tZWRpdCB7CiAgcGFkZGluZzogMTVweDsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmOwogIGJvcmRlcjogMXB4IHNvbGlkICNDQkNCQ0I7Cn0KCi5jb25zdWx0YXRpb24tZGF0ZSB7CiAgY29sb3I6ICMwMjA2NDQ7CiAgZm9udC1zaXplOiAxcmVtOwogIG1hcmdpbi10b3A6IDVweDsKfQoKLmF2YWlsYWJsZS0taXRlbSAuZmEtcGx1cyB7CiAgZm9udC1zaXplOiAyMHB4Owp9CgouYWRkLWljb24gewogIGxpbmUtaGVpZ2h0OiA3NXB4OwogIGN1cnNvcjogcG9pbnRlcjsKfQoKLmFkZC1pY29uID4gaSB7CiAgY29sb3I6ICMwMjA2NDQ7Cn0KCi5zdGVwLXRpdGxlIHsKICBjb2xvcjogI0VCNjI3MTsKfQoKLmNvbGxhcHNlLWljb24tZGl2IHsKICBsaW5lLWhlaWdodDogOTVweDsKICB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlOwp9CgouZmEtY2hldnJvbi1kb3duIHsKICBjb2xvcjogd2hpdGU7CiAgZm9udC1zaXplOiA0MHB4Owp9Cg=="},{"version":3,"sources":["AvailableListing.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4VA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"AvailableListing.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div>\n    <div class=\"mb-5\">\n      <p class=\"title-20 step-title\">\n        Step 1: Online consultations\n      </p>\n      <p class=\"f-18 font-weight-500\">Please use below calendar to select the available time slots you can provide\n        online audio/video\n        consultations to patients on the Hera platform. For China clients, please consider time difference\n        accordingly.</p>\n\n      <div class=\"available--wrapper\">\n        <div class=\"row\">\n          <div class=\"col-sm-11\">\n            <div v-for=\"item in online_consulations\" :key=\"item.id\" class=\"available--item\">\n              <AdminTimeSlot\n                  :time-slot-prop=\"item\"\n                  @edit=\"onEditAdminTimeSlot\"\n                  @select=\"onEditAvailable\"\n                  @delete=\"onDelete\"/>\n            </div>\n            <div @click=\"onAddOnlineConsulation\" class=\"available--item add-icon\">\n              <i class=\"fa fa-plus\"></i>\n            </div>\n          </div>\n          <div class=\"col-sm-1 collapse-icon-div\">\n            <i class=\"fa fa-chevron-down\" aria-hidden=\"true\"></i>\n          </div>\n        </div>\n      </div>\n      <div class=\"available--edit\" v-if=\"toggle_edit && date_selected\">\n        <div class=\"row\">\n          <div class=\"col-sm-4 date-picker-custom\">\n            <date-picker :inline=\"true\" @change=\"onChangeCalendar(false)\" v-model=\"date_selected\"\n                         value-type=\"timestamp\"></date-picker>\n          </div>\n          <div class=\"col-sm-8 text-center\">\n            <p>Available appointments on\n              <span style=\"color: #020644; font-weight: 500;\">\n                {{ (date_selected / 1000) | convertTimeSecondToDate\n              }}.</span>\n            </p>\n            <p>Please select as many available times as you wish.</p>\n\n            <div class=\"row\">\n              <div class=\"col-sm-4 available-time-label\">\n                <label>Available Time</label>\n              </div>\n              <div class=\"col-sm-8 available-time-select\">\n                <div class=\"row\" style=\"margin: 0; margin-right: 40px;\">\n                  <div class=\"col-sm-6 text-center desc-12\">\n                    China UTC+8\n                  </div>\n                  <div class=\"col-sm-6 text-center desc-12\">\n                    Local\n                  </div>\n                </div>\n                <multiselect\n                    v-model=\"time_selected\"\n                    :options=\"chinaAndLocalTimeRange\"\n                    :searchable=\"false\"\n                    :close-on-select=\"true\"\n                    :show-labels=\"false\"\n                    placeholder=\"Pick available time\"\n                    @input=\"onChangeTime(false)\"\n                >\n                  <template slot=\"singleLabel\" slot-scope=\"{ option }\">\n                    <div class=\"row\" style=\"margin-left: -13px;\">\n                      <div class=\"col-sm-6 text-center\">\n                        <span>{{ option.china }}</span>\n                      </div>\n                      <div class=\"col-sm-6 text-center\">\n                        {{ option.local }}\n                      </div>\n                    </div>\n                  </template>\n\n                  <template slot=\"option\" slot-scope=\"{ option }\">\n                    <div class=\"row\" style=\"margin-right: 25px;\">\n                      <div class=\"col-sm-6 text-center\">\n                        <span>{{ option.china }}</span>\n                      </div>\n                      <div class=\"col-sm-6 text-center\">\n                        {{ option.local }}\n                      </div>\n                    </div>\n                  </template>\n                </multiselect>\n              </div>\n            </div>\n            <!-- <b-form inline>\n              <label for=\"\">Available Time</label>\n              <select @change=\"onChangeTime(false)\" class=\"form-control\" v-model=\"time_selected\">\n                <option :key=\"time.id\" :value=\"time.id\" v-for=\"time in time_ranges\">{{\n                  time.hour.toString().padStart(2, '0') }}:{{ time.minute.toString().padStart(2, '0') }}\n                </option>\n            </select>\n            </b-form> -->\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <hr class=\"divider\"/>\n\n    <div class=\"mb-5\">\n      <p class=\"title-20 step-title\">\n        Step 2: Site visit appointments\n      </p>\n      <p>Please use below calendar to select the available time slots you can provide site visit appointment to\n        patients on the\n        Hera platform. For China clients, please consider time difference accordingly.</p>\n\n      <div class=\"available--wrapper\">\n        <div class=\"row\">\n          <div class=\"col-sm-11\">\n            <div :key=\"item.id\" class=\"available--item\" v-for=\"item in site_visits\">\n              <AdminTimeSlot\n                  :time-slot-prop=\"item\"\n                  @edit=\"onEditAdminTimeSlot\"\n                  @delete=\"onDelete\"\n                  @select=\"onEditAvailable\"\n                  :is-site=\"true\"/>\n            </div>\n            <div @click=\"onAddSiteVisit\" class=\"available--item add-icon\">\n              <i class=\"fa fa-plus\"></i>\n            </div>\n          </div>\n          <div class=\"col-sm-1 collapse-icon-div\">\n            <i class=\"fa fa-chevron-down\" aria-hidden=\"true\"></i>\n          </div>\n        </div>\n      </div>\n      <div class=\"available--edit\" v-if=\"toggle_edit_site && date_selected_site\">\n        <div class=\"row\">\n          <div class=\"col-sm-4 date-picker-custom\">\n            <date-picker :inline=\"true\" @change=\"onChangeCalendar(true)\" v-model=\"date_selected_site\"\n                         value-type=\"timestamp\"></date-picker>\n          </div>\n          <div class=\"col-sm-8 text-center\">\n            <p>Available appointments on\n              <span style=\"color: #020644; font-weight: 500;\">\n                {{ (date_selected_site / 1000) | convertTimeSecondToDate\n              }}.</span></p>\n            <p>Please select as many available times as you wish.</p>\n            <div class=\"row\">\n              <div class=\"col-sm-6 available-time-label\">\n                <label>Available Time</label>\n              </div>\n              <div class=\"col-sm-6 available-time-select\">\n                <div class=\"text-left\" style=\"width: 150px; padding-left: 16px;\">\n                  Local\n                </div>\n                <select @change=\"onChangeTime(true)\"\n                        class=\"form-control\"\n                        style=\"width: 150px;\"\n                        v-model=\"time_selected_site\">\n                  <option :key=\"time\" :value=\"time\" v-for=\"time in time_ranges\">{{ time }}\n                  </option>\n                </select>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\n  import utils from '../utils/utils'\n  import Const from \"./../utils/const\"\n  import DatePicker from 'vue2-datepicker'\n  import AdminTimeSlot from '../components/AdminTimeSlot'\n  import Multiselect from \"vue-multiselect\";\n\n  export default {\n    components: {\n      DatePicker, AdminTimeSlot, Multiselect,\n    },\n    props: ['online_consulations', 'site_visits'],\n    data() {\n      return {\n        Const,\n        toggle_edit: false,\n        toggle_edit_site: false,\n        date_selected: null,\n        date_selected_site: null,\n        time_selected: null,\n        time_selected_site: null,\n        item_selected: null,\n        time_ranges: [],\n        value: \"\",\n        chinaAndLocalTimeRange: [],\n      }\n    },\n    mounted() {\n      let self = this\n      let localTimeRange = utils.getTimeRange()\n      self.time_ranges = localTimeRange.map(timeObj => `${timeObj.hour}:${timeObj.min}`)\n      let offsetHoursToChina = utils.getLocalTimeZoneOffsetTo(8)\n\n      this.chinaAndLocalTimeRange = localTimeRange.map(timeObj => {\n        let local = `${timeObj.hour}:${timeObj.min}`\n        let chinaHour = Number(timeObj.hour) + offsetHoursToChina\n        let china = `${chinaHour.toString().padStart(2, '0')}:${timeObj.min}`\n        return {local, china}\n      })\n    },\n    methods: {\n      onAddOnlineConsulation() {\n        let self = this\n\n        // Hide edit calendar\n        self.toggle_edit = !self.toggle_edit\n\n        self.online_consulations.push({\n          id: utils.randomStr(6),\n          clinic_id: self.id,\n          type: 1,\n          date: (new Date()).getTime() / 1000\n        })\n      },\n      onAddSiteVisit() {\n        let self = this\n\n        // Hide edit calendar\n        self.toggle_edit_site = !self.toggle_edit_site\n\n        self.site_visits.push({\n          id: utils.randomStr(6),\n          clinic_id: self.id,\n          type: 2,\n          date: (new Date()).getTime() / 1000\n        })\n      },\n      onDelete(idStr) {\n        let self = this\n        let id = parseInt(idStr)\n        var r = confirm(\"Are you want to remove this clinic available?\");\n        if (r != true) {\n          return\n        }\n\n        for (var i = 0; i < self.online_consulations.length; i++) {\n          if (self.online_consulations[i].id == idStr) {\n            self.online_consulations.splice(i, 1)\n          }\n        }\n        for (var j = 0; j < self.site_visits.length; j++) {\n          if (self.site_visits[j].id == idStr) {\n            self.site_visits.splice(j, 1)\n          }\n        }\n\n        if (id > 0) {\n          self.$emit('onDelete', id)\n        }\n      },\n      onEditAvailable(param) {\n        let {item, is_site} = param\n        let self = this\n\n        // Show calendar edit.\n        if (!is_site) {\n          self.toggle_edit = !self.toggle_edit\n        } else {\n          self.toggle_edit_site = !self.toggle_edit_site\n        }\n\n        let date = new Date(item.date * 1000)\n        if (!is_site) {\n          self.date_selected = date.getTime()\n          // self.time_selected = date.getHours() + '_' + date.getMinutes()\n          self.time_selected = this.getTimeSelectedObject(date)\n          // self.time_selected =  { china: \"08:00\", local: \"07:00\" }\n        } else {\n          self.date_selected_site = date.getTime()\n          let hour = date.getHours().toString().padStart(2, '0')\n          let min = date.getMinutes().toString().padStart(2, '0')\n          self.time_selected_site = hour + ':' + min\n        }\n        self.item_selected = item\n      },\n      getTimeSelectedObject(date) {\n        let local = `${date.getHours().toString().padStart(2, '0')}:${date.getMinutes().toString().padStart(2, '0')}`\n        let chinaTime = this.convertTimeToChinaPlus8(date)\n        let china = `${chinaTime.getHours().toString().padStart(2, '0')}:${chinaTime.getMinutes().toString().padStart(2, '0')}`\n        return {local, china}\n      },\n      convertTimeToChinaPlus8(date) {\n        let localTime = date.getTime()\n        let localOffset = date.getTimezoneOffset() * 60000\n        let utcTime = localTime + localOffset\n        let chinaPLus8Time = utcTime + (3600000 * 8)\n        return new Date(chinaPLus8Time)\n      },\n      onChangeTime(is_site = false) {\n        let self = this\n        self.onChangeCalendar(is_site)\n        if (self.item_selected) {\n          let params = {\n            clinic_available: self.item_selected\n          }\n\n          self.$emit('onChangeTime', params)\n        }\n      },\n      onEditAdminTimeSlot(param) {\n        let self = this\n        let {item, is_site} = param\n        let body = {clinic_available: item}\n        self.$emit('onEditAdminTimeSlot', body)\n      },\n      onChangeCalendar(is_site = false) {\n        let self = this\n        const date_selected = (!is_site) ? self.date_selected : self.date_selected_site\n        const time_selected = (!is_site) ? self.time_selected : self.time_selected_site\n        let date = new Date(date_selected)\n        if (time_selected) {\n          let times\n          if (is_site) {\n            times = time_selected.split(':')\n          } else {\n            times = time_selected.local.split(':')\n          }\n          date.setHours(times[0])\n          date.setMinutes(times[1])\n        }\n\n        for (var i = 0; i < self.online_consulations.length; i++) {\n          if (self.online_consulations[i].id == self.item_selected.id) {\n            self.online_consulations[i].date = date.getTime() / 1000\n            self.item_selected = self.online_consulations[i]\n          }\n        }\n        for (var j = 0; j < self.site_visits.length; j++) {\n          if (self.site_visits[j].id == self.item_selected.id) {\n            self.site_visits[j].date = date.getTime() / 1000\n            self.item_selected = self.site_visits[j]\n          }\n        }\n      }\n    }\n  }\n</script>\n\n<style scoped>\n  .available--wrapper {\n    background-color: #020644;\n    padding: 15px;\n  }\n\n  .available--item {\n    display: inline-block;\n    width: 138px;\n    height: 75px;\n    background-color: #fff;\n    vertical-align: middle;\n    text-align: center;\n    margin: 10px;\n  }\n\n  .available--edit {\n    padding: 15px;\n    background-color: #fff;\n    border: 1px solid #CBCBCB;\n  }\n\n  .consultation-date {\n    color: #020644;\n    font-size: 1rem;\n    margin-top: 5px;\n  }\n\n  .available--item .fa-plus {\n    font-size: 20px;\n  }\n\n  .add-icon {\n    line-height: 75px;\n    cursor: pointer;\n  }\n\n  .add-icon > i {\n    color: #020644;\n  }\n\n  .step-title {\n    color: #EB6271;\n  }\n\n  .collapse-icon-div {\n    line-height: 95px;\n    vertical-align: middle;\n  }\n\n  .fa-chevron-down {\n    color: white;\n    font-size: 40px;\n  }\n</style>\n"]}]}